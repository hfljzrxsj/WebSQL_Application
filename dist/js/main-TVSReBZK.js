import{j as e}from"./react-ejZHSj7z.js";import{B as Ye,C as ve,S as Ze,L as Et,D as _t,a as $t,d as ye,b as et,c as Ct,P as B,e as kt,A as Ae,f as Ie,T as Be,g as Fe,h as qe,i as ie,F as tt,j as Lt,k as D,l as nt,m as Nt,n as Dt,o as wt,p as Ue,q as Qe,r as Pt,s as Ot,t as Mt,u as At,v as It,I as Bt,w as Ft,M as fe,x as je,y as qt,z as Ut,E as Qt,G as Ht,H as Wt,J as zt,K as Gt,N as Kt,O as Jt,Q as Vt,R as Xt,U as Yt,V as Zt,W as en,X as tn}from"./@mui-_A7eRbnw.js";import{d as st,O as nn,e as sn,f as xe}from"./react-router-y82kxMFL.js";import{N as on,H as an}from"./react-router-dom-v3GnXs1D.js";import{u as ot,a as re,b as ce,c as I,d as rn,e as cn,f as ln,g as dn}from"./ahooks-LOzqvy8i.js";import{c as at}from"./copy-text-to-clipboard-SBA1EQaE.js";import"./object-assign-4_VUvG2Z.js";import"./@emotion-tNa4IMmz.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./@babel-moqvDIRK.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@remix-run-Tfa50bkj.js";import"./tslib-g6pQwBLH.js";import"./lodash-liWoq_f8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function c(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(o){if(o.ep)return;o.ep=!0;const r=c(o);fetch(o.href,r)}})();const un="modulepreload",pn=function(t,s){return new URL(t,s).href},He={},hn=function(s,c,d){let o=Promise.resolve();if(c&&c.length>0){const r=document.getElementsByTagName("link");o=Promise.all(c.map(i=>{if(i=pn(i,d),i in He)return;He[i]=!0;const h=i.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!d)for(let S=r.length-1;S>=0;S--){const j=r[S];if(j.href===i&&(!h||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${p}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":un,h||(x.as="script",x.crossOrigin=""),x.href=i,document.head.appendChild(x),h)return new Promise((S,j)=>{x.addEventListener("load",S),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${i}`)))})}))}return o.then(()=>s()).catch(r=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r})},mn="_AppBar_n6byb_1",fn="_menuIcon_n6byb_11",xn="_Avatar_n6byb_19",gn="_open_n6byb_27",yn="_Popover_n6byb_39",jn="_DialogActions_n6byb_57",G={AppBar:mn,menuIcon:fn,Avatar:xn,open:gn,Popover:yn,DialogActions:jn};var rt=(t=>(t.SET_TITLE="SET_TITLE",t))(rt||{}),ct=(t=>(t.title="title",t))(ct||{});const vn={title:""},Sn=(t=vn,s)=>{const{type:c,payload:d={}}=s;switch(c){case"SET_TITLE":return{...t,...d};default:return t}},Tn=ReactRedux.useSelector,Rn="_NavLink_1kxee_1",bn="_CollapseClick_1kxee_8",En="_ArrowDownIcon_1kxee_11",_n="_overview_1kxee_15",$n="_ListItemButton_1kxee_20",K={NavLink:Rn,CollapseClick:bn,ArrowDownIcon:En,overview:_n,ListItemButton:$n};var de=(t=>(t.SET="SET",t))(de||{}),J=(t=>(t.config="config",t.index="index",t.TRIGGER="TRIGGER",t))(J||{});const Cn={config:[],index:!1,TRIGGER:""},kn=(t=Cn,s)=>{const{type:c,payload:d={}}=s;switch(c){case"SET":return{...t,...d};default:return t}},lt=ReactRedux.useSelector,it=({className:t,...s})=>e.jsx(Ct,{className:classNames(t,K.ListItemButton),...s}),dt=t=>{const{text:s="",path:c="",setOpen:d,...o}=t,[r,i]=React.useState(!1),[h,p]=React.useState(!0),y=ReactRedux.useDispatch();return e.jsx(it,{selected:r,disableGutters:!0,onClick:x=>{const{target:S}=x;if(HTMLDivElement.prototype.isPrototypeOf(S)&&S instanceof HTMLDivElement&&Object.prototype.toString.call(S)==="[object HTMLDivElement]"&&S.constructor===HTMLDivElement&&typeof S=="object"){const{children:j,childNodes:k}=S,E=j.item(0)??j[0]??k[0]??k.values().next().value??document.createElement("a");HTMLAnchorElement.prototype.isPrototypeOf(E)&&E instanceof HTMLAnchorElement&&Object.prototype.toString.call(E)==="[object HTMLAnchorElement]"&&E.constructor===HTMLAnchorElement&&typeof E=="object"&&E.click()}},...o,children:e.jsx(on,{to:c,className:({isActive:x})=>ReactDOM.unstable_batchedUpdates(()=>(i(x),x&&h&&d?.(),p(!1),K.NavLink)),onClick:()=>{y({type:rt.SET_TITLE,payload:{title:s}}),document.title=s},children:s})})},Ln=({item:t})=>{const{children:s,id:c,path:d=""}=t,[o,r]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsxs(it,{onClick:r.bind(null,!o),className:classNames(K.CollapseClick,{[K.CollapseClickActive??""]:o}),children:[e.jsx($t,{primary:c}),e.jsx(ye,{className:classNames({[K.ArrowDownIcon??""]:o})})]}),e.jsx(et,{in:o,children:e.jsx("ul",{children:s?.map((i,h)=>e.jsx("li",{children:e.jsx(dt,{text:i.id??"",path:gt(d,i.path??""),setOpen:r.bind(null,!0)})},h))})})]})};function Se(){const t=ReactRedux.useDispatch(),{data:s,loading:c}=ot(()=>axios.get("assets/config.json").then(o=>{const{data:r}=o;return t({type:de.SET,payload:{config:r}}),r}).catch(console.error),jt);if(c||!s)return e.jsx(Ye,{open:!0,children:e.jsx(ve,{})});const d=s.map(o=>({id:o.path,path:o.path,children:o.children.map(r=>({path:r,id:r}))}));return e.jsx(React.StrictMode,{children:e.jsx(Ze,{injectFirst:!0,children:[...vs,...d].map((o,r)=>{const{children:i,id:h="",path:p=""}=o;return e.jsxs(React.StrictMode,{children:[e.jsx(Et,{children:i?e.jsx(Ln,{item:o}):e.jsx(dt,{text:h,path:gt(p),className:K.overview??""})},r),e.jsx(_t,{})]})})})})}const Nn="_Paper_p9qzm_1",Dn={Paper:Nn},{queueMicrotask:wn,setTimeout:Pn,Promise:We,requestIdleCallback:On,requestAnimationFrame:Mn,console:ze,MessageChannel:An}=window??self??globalThis??global??void 0,te=(t=()=>{})=>{const s=(c=()=>{})=>On?.(()=>Pn?.(()=>Mn?.(()=>wn?.(()=>We?.resolve?.()?.then?.(()=>{const{port1:d,port2:o}=new An;o.onmessage=()=>c?.(),d?.postMessage?.(null)}).catch?.(ze?.error)))));return new We(c=>s?.(c))?.then?.(()=>s?.(t)).catch?.(ze?.error)},{addEventListener:In,queueMicrotask:Bn,setTimeout:Fn,Promise:Ge,requestIdleCallback:qn,requestAnimationFrame:Un,console:Ke,MessageChannel:Qn}=window??self??globalThis??global??void 0,Hn=(t=()=>{})=>{const s=(c=()=>{})=>qn?.(()=>Fn?.(()=>Un?.(()=>Bn?.(()=>Ge?.resolve?.()?.then?.(()=>{const{port1:d,port2:o}=new Qn;o.onmessage=()=>c?.(),d?.postMessage?.(null)}).catch?.(Ke?.error)))));return In("load",()=>new Ge(c=>s?.(c))?.then?.(()=>s?.(t)).catch?.(Ke?.error))},Je={elevation:24,className:Dn.Paper??""},ue="WebSQL",{addEventListener:Qs,document:Wn,navigator:Hs,Object:Ws,console:zs}=window??self??globalThis??global??void 0;Hn(()=>Wn.title=ue);function zn(){return e.jsxs(React.StrictMode,{children:[e.jsx(B,{...Je,children:ue}),e.jsx(B,{...Je,children:e.jsx(Se,{})})]})}const Gn=Object.freeze(Object.defineProperty({__proto__:null,default:zn,documentTitle:ue},Symbol.toStringTag,{value:"Module"})),Kn="_Paper_tn9lt_2",Jn="_Input_tn9lt_22",Vn="_sqlInput_tn9lt_44",Xn="_AccordionDetails_tn9lt_51",Yn="_last_tn9lt_60",Zn="_fullWidth_tn9lt_68",es="_aLink_tn9lt_74",ts="_Skeleton_tn9lt_82",ns="_dialog_tn9lt_87",N={Paper:Kn,Input:Jn,sqlInput:Vn,AccordionDetails:Xn,last:Yn,fullWidth:Zn,aLink:es,Skeleton:ts,dialog:ns};var w=(t=>(t.SnackbarAlert="SnackbarAlert",t.OPENTRUE="OPENTRUE",t.OPENFALSE="OPENFALSE",t))(w||{}),$=(t=>(t.alertText="alertText",t.open="open",t.severity="severity",t))($||{}),F=(t=>(t.error="error",t.info="info",t.success="success",t.warning="warning",t))(F||{});const ss={alertText:"",open:!1,severity:"success"},os=(t=ss,s)=>{const{type:c,payload:d={}}=s,o=r=>({...t,...d,open:r});switch(c){case"OPENFALSE":return o(!1);case"OPENTRUE":return o(!0);default:return t}},ut=ReactRedux.useSelector,{entries:ee,values:as,keys:ge}=Object,rs=window??global??globalThis??self??void 0,pt="table",cs="1.0",ls=pt,is=2*1024*1024,ne=rs.openDatabase(pt,cs,ls,is,t=>{}),ds="未选择",ht=t=>{const{i:s,...c}=t,{foreignTable:d,foreignKey:o,id:r}=s,[i,h]=cn();return React.useEffect(()=>{d&&o&&ne.transaction(p=>{p.executeSql(`SELECT * FROM ${d}`,[],function(y,x){h(x.rows)})},p=>{},()=>{})},[d,o]),e.jsxs(It,{fullWidth:!0,...c,children:[e.jsx(Bt,{title:s.id,children:s.name}),e.jsxs(Ft,{fullWidth:!0,...c,children:[e.jsx(fe,{value:void 0,children:ds}),s.enum?s.enum?.map((p,y)=>e.jsx(fe,{value:y,children:p},y)):new Array(i?.length).fill(" ").map((p,y)=>e.jsx(fe,{value:i?.item(y)[r??""],children:i?.item(y)[o??""]},y))]})]})},Y=0,Z=t=>t!=null&&t!=="",mt=t=>!!t?.type,le=(t,s)=>mt(t)?s:`'${s}'`;function us(){const t=ReactRedux.useDispatch(),{subtitle:s,id:c}=st(),{index:d,config:o}=lt(n=>({index:n.DB[J.index],config:n.DB[J.config]})),{data:r,loading:i,refresh:h}=ot(()=>axios.get(`assets/${c}.json`).then(n=>n.data).catch(console.error),jt);re(()=>{h()},[c]);const p=c??"",[y,x,S]=ce(0),[j,k,E]=ce(10),[P,M,q]=ce(0),T=Array.isArray(r)?r??[]:[],v=T.filter(n=>n.primary),m=T.reduce((n,l)=>{const a=l.foreignKey;return a&&(n[a]=l),n[l.id]=l,n},{}),f=T.map(n=>n.id),_=T.filter(n=>!!n.foreignKey).map(n=>String(n.foreignKey)),pe=[...T.filter(n=>!n.foreignKey).map(n=>String(n.id)),..._],[H,A,U]=ce(""),[W,z]=I({}),Re=ee(W).filter(([n,l])=>Z(l)&&f.includes(n)),be=React.useCallback(n=>T.reduce((l,a)=>(l[a.id]=a.type?!1:n,l),{}),[T]),Ee=be(!1),[V,_e]=I(Ee),vt=as(V),[se,$e]=I(Ee),Ce=d&&s===o?.[0]?.path?` INDEXED BY ${p}_Index`:"",ke=T.filter(n=>n.foreignTable).reduce((n,l)=>{const{foreignTable:a,id:u}=l;return n+`LEFT JOIN ${a} ON ${p}.${u}=${a}.${u} `}," ").trimEnd(),Le=` LIMIT ${E()} OFFSET ${E()*S()}`,he=`SELECT * FROM ${p}${Ce}${ke}${Le};`,Ne=!Re.length?"":" WHERE "+Re.reduce((n,l)=>{const[a,u]=l;return Z(u)?Array.isArray(u)?[...n,`(${a} BETWEEN ${u[0]} AND ${u[1]})`]:[...n,`${p}.${a} ${se[a]?`LIKE "%${String(u)}%"`:`= ${le(m[a],u)}`} `]:n},[]).join(" and ").trimEnd(),{run:oe}=rn(React.useCallback((n=H)=>{const l=n.trim().split(";");ne.transaction(a=>{for(let u of l)u&&a.executeSql(u,[],function(R,b){const{rows:g,rowsAffected:C}=b;C===0&&g?(Tt({rows:g}),M(g.length)):t({type:w.OPENTRUE,payload:{[$.alertText]:`${u.split(" ")[0]}成功！`,[$.severity]:F.success}})})},a=>{Pe({severity:"error",alertText:`执行失败, 原因：${a.message}`}),t({type:w.OPENTRUE,payload:{[$.alertText]:`执行失败, 原因：${a.message}`,[$.severity]:F.error}})},()=>{ne.transaction(a=>{a.executeSql(`SELECT COUNT(*) FROM ${p}${Ne};`,[],function(u,R){const{rows:b}=R;M(b.item(0)["COUNT(*)"])})},a=>{},()=>{})})},[H,p]));React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{if(!r)return;A(he),z(ge(W).reduce((l,a)=>(l[a]=void 0,l),{}));const n={...be(!1),...[...ge(V),...ge(se)].reduce((l,a)=>(l[a]=!1,l),{})};_e(n),$e(n),te(()=>oe(he))}),[r]);const[St,Tt]=I({insertId:0,rowsAffected:0,rows:{length:0,item:()=>{}}});re(()=>{const n=vt.every(l=>!l)?"*":ee(V).reduce((l,a)=>{const[u,R]=a,b=m[u];return R?[...l,`${b?.foreignTable??p}.${b?.foreignKey??u}`]:l},[]).join(", ");A(`SELECT ${n} FROM ${p}${Ce}${ke}${Ne}${Le};`)},[W,se,V,y,j,d]),re(()=>{te(()=>oe(U()))},[y,j]);const L=St?.rows,De=React.useMemo(()=>L.length?Object.keys(L.item(0)??{}).filter(n=>pe.includes(n)):[],[L]),[we,Pe]=I({severity:"info",alertText:"待操作"}),{open:Rt}=ut(n=>({open:n.SnackBar.open}));re(()=>ReactDOM.unstable_batchedUpdates(()=>{te(()=>{const n={severity:"success",alertText:`执行成功, 查到 ${q()??L?.length} 条记录`};Pe(n),Rt||t({type:w.OPENTRUE,payload:n})})}),[L]);const[Oe,ae]=I({open:!1,type:"UD",dialogData:L.length?L.item(0):{}}),{dialogData:bt}=Oe,Me=n=>v.map(l=>{const{id:a}=l,u=n[a];return`${a}=${le(l,u)}`}).join(" AND ");return i||T.length===0?e.jsx(kt,{className:N.Skeleton??"",variant:"rounded",animation:"wave"}):e.jsxs(e.Fragment,{children:[e.jsxs(B,{elevation:24,className:N.Paper??"",children:[e.jsxs(Ae,{elevation:24,children:[e.jsx(Ie,{expandIcon:e.jsx(ye,{}),children:e.jsx(Be,{children:"筛选器"})}),e.jsx(Fe,{className:N.Input??"",children:T.map((n,l)=>{const{id:a}=n;return e.jsxs(B,{elevation:24,className:classNames({[N.last??""]:n.type==="between"})??"",title:a,children:[e.jsx(qe,{title:a,onChange:(u,R)=>{_e({[a]:R})},checked:V[a]}),(()=>{switch(n.type){case"enum":return e.jsx(ht,{fullWidth:!0,label:n.name,title:a,onChange:u=>{const{target:R}=u;if("value"in R){const b=R.value;z({[a]:b})}},i:n});case"between":{const u=W[a];return e.jsxs(e.Fragment,{children:[e.jsx("span",{title:a,children:n.name}),e.jsx(Lt,{title:a,min:n.min??0,max:n.max??100,step:n.step??1,value:Array.isArray(u)?u:[0,100],onChange:(R,b,g)=>{if(!Array.isArray(b))return;const[C,O]=b,{id:me}=n;if(C!==void 0&&O!==void 0)if(O-C<Y)if(g===0){const X=Math.min(C,100-Y);z({[me]:[X,X+Y]})}else{const X=Math.max(O,Y);z({[me]:[X-Y,X]})}else z({[me]:b})},valueLabelDisplay:"on",disableSwap:!0})]})}default:return e.jsxs(e.Fragment,{children:[e.jsx(ie,{"aria-autocomplete":"both",label:n.name,title:a,type:n.type==="number"?"number":"search",onChange:u=>{z({[a]:u.target.value})}}),e.jsx(tt,{title:a,control:e.jsx(qe,{title:a}),label:"模糊搜索",onChange:(u,R)=>$e({[a]:R}),checked:se[a]})]})}})()]},l)})})]}),e.jsxs(Ae,{elevation:24,className:N.sqlInput??"",children:[e.jsx(Ie,{expandIcon:e.jsx(ye,{}),children:e.jsx(Be,{children:"SQL执行"})}),e.jsxs(Fe,{className:N.AccordionDetails??"",children:[e.jsx(ie,{multiline:!0,autoFocus:!0,fullWidth:!0,"aria-autocomplete":"both",label:"SQL",onChange:n=>A(n.target.value),value:H}),e.jsx(D,{size:"large",variant:"contained",onClick:n=>{x(l=>(l||oe(U()),0))},children:"Transaction"})]})]}),e.jsx(B,{elevation:24,className:N.fullWidth??"",children:e.jsx(nt,{severity:we.severity,variant:"filled",children:we.alertText})}),e.jsxs(B,{elevation:24,children:[e.jsx(Nt,{children:e.jsxs(Dt,{stickyHeader:!0,children:[e.jsx(wt,{children:e.jsx(Ue,{children:De.map((n,l)=>e.jsx(Qe,{align:"center",title:n,children:m[n]?.name??n},l))})}),e.jsx(Pt,{children:new Array(L.length).fill(" ").map((n,l)=>e.jsx(Ue,{hover:!0,children:De.map((a,u)=>{const R=m[a],b=R?.id,g=L?.item(l),C=R?.enum,O=g[a];return React.createElement(Qe,{...b&&{title:String(g[b])},key:u,align:"center",...m[a]?.primary&&{onClick:()=>{ae({open:!0,type:"UD",dialogData:g})},className:N.aLink??""}},C&&Z(O)?C[Number(O)]:typeof O=="number"?Math.round(O*1e3)/1e3:O)})},l))})]})}),e.jsx(Ot,{component:"div",count:P??L?.length??10,rowsPerPage:j,page:y,onPageChange:(n,l)=>{x(l)},onRowsPerPageChange:n=>ReactDOM.unstable_batchedUpdates(()=>{k(+n.target.value),x(0)}),labelDisplayedRows:n=>`${n.from}-${isNaN(n.to)?1:n.to}/共${n.count??0}项`,labelRowsPerPage:"每页行数："})]}),e.jsx(B,{elevation:24,children:e.jsx(Mt,{color:"primary",size:"large",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{ae({open:!0,type:"C",dialogData:T.reduce((n,l)=>(n[l.id]="",n),{})})}),children:e.jsx(At,{})})})]}),e.jsx(ps,{onClose:()=>ae({open:!1}),className:N.dialog??"",...Oe,dialogDataProps:bt,idToNameRecord:m,idToNameKeys:f,idToNamePrimary:v,idToName:T,comfirm:n=>ReactDOM.unstable_batchedUpdates(()=>{A(n),oe(`${n};${he}`),ae({open:!1})}),modifySQL:n=>{const l=ee(n).filter(([a])=>f.includes(a)&&!m[a]?.primary).map(([a,u])=>`${a}=${Z(u)?le(m[a],u):"null"}`).join(", ");return`UPDATE ${p} SET ${l} WHERE ${Me(n)};`},deleteSQL:n=>`DELETE FROM ${p} WHERE ${Me(n)};`,insertSQL:n=>{const l=ee(n).filter(([g,C])=>Z(C)&&f.includes(g)),a=v.map(g=>g.id),u=l.map(([g])=>g);if(a.some(g=>!u.includes(g)))return t({type:w.OPENTRUE,payload:{[$.alertText]:"还有必填项未填写",[$.severity]:F.warning}}),"";const R=l.map(([g])=>g).join(", "),b=l.map(([g,C])=>`${le(m[g],C)}`).join(", ");return`INSERT INTO ${p} (${R}) VALUES (${b});`}})]})}const ps=t=>{const{type:s,dialogDataProps:c,idToNameRecord:d,idToNameKeys:o,modifySQL:r,deleteSQL:i,comfirm:h,idToNamePrimary:p,insertSQL:y,idToName:x,...S}=t,[j,k]=I(c),[E,P]=I({open:!1,text:"",code:""}),M=s==="UD";React.useEffect(()=>{k(c)},[c,open]);const q=()=>{P({open:!1})},T=(v,m)=>M?{defaultValue:v,disabled:!!m}:{required:!!m};return e.jsxs(e.Fragment,{children:[e.jsxs(je,{...S,children:[ee(j??{}).filter(([v])=>o.includes(v)).map(([v,m],f)=>{const _=d[v],Q=_?.type,pe=mt(_),H=_.primary;return _&&Q==="enum"?e.jsx(ht,{i:_,...T(m,H),label:_.name,title:v,onChange:A=>{const{target:U}=A;if("value"in U){const W=U.value;k({[v]:W})}}},f):React.createElement(ie,{"aria-autocomplete":"both",label:_.name,title:v,type:pe?"number":"search",...T(m,H),key:f,onChange:A=>{const{value:U}=A.target;k({[v]:U})}})}),M?e.jsxs(e.Fragment,{children:[e.jsx(D,{size:"large",variant:"contained",onClick:()=>{P({open:!0,text:"确认修改？",code:r(j)})},children:"修改"}),e.jsx(D,{size:"large",variant:"outlined",color:"error",onClick:()=>{P({open:!0,text:"确认删除？",code:i(j)})},children:"删除"})]}):e.jsx(D,{size:"large",variant:"contained",onClick:()=>{const v=y(j);v&&P({open:!0,text:"确认新增？",code:v})},children:"新增"})]}),e.jsxs(je,{open:E.open,onClose:q,className:N.dialog??"",children:[e.jsx("h1",{children:E.text}),e.jsx(ie,{defaultValue:E.code,onChange:v=>P({code:v.target.value}),autoFocus:!0,"aria-autocomplete":"both",label:"sql",type:"search",multiline:!0,fullWidth:!0}),e.jsx(D,{size:"large",variant:"outlined",color:"warning",onClick:()=>{h(E.code),q()},children:"确认"}),e.jsx(D,{size:"large",variant:"contained",onClick:q,children:"取消"})]})]})},{error:Ve}=console,ft=({...t})=>e.jsx(D,{variant:"contained",size:"large",...t}),hs=()=>window.caches?.keys()?.then(t=>t.forEach(s=>window.caches?.delete(s))).catch(console.error),ms=t=>{const{open:s=!1,handleClose:c,onClick:d,title:o,content:r}=t;return e.jsxs(je,{open:s,keepMounted:!0,onClose:c,children:[e.jsx(Jt,{children:o}),r&&e.jsx(Vt,{children:r}),e.jsxs(Xt,{className:G.DialogActions??"",children:[e.jsx(D,{variant:"outlined",onClick:c,size:"large",children:"取消"}),e.jsx(ft,{onClick:d,children:"确定"})]})]})},Xe=(t,s,c)=>{let d=setTimeout(()=>{te(()=>location.reload())},5e3);fetch(`assets/${t}.sql`).then(o=>o.text()).then(o=>{const r=o.trim().split(";");ne.transaction(i=>{for(let h of r)h&&i.executeSql(h+";",[])},i=>{s({type:w.OPENTRUE,payload:{[$.alertText]:`执行失败, 原因：${i.message}`,[$.severity]:F.error}}),clearTimeout(d)},()=>{s({type:w.OPENTRUE,payload:{[$.alertText]:c,[$.severity]:F.success}})})})},fs=t=>fetch("assets/TRIGGER.sql").then(s=>s.text()).then(s=>(t({type:de.SET,payload:{TRIGGER:s}}),s??"")).then(at,Ve).catch(Ve);function xs(t){const s=ReactRedux.useDispatch(),c=ReactRedux.useDispatch(),{index:d,config:o,TRIGGER:r}=lt(f=>({index:f.DB[J.index],config:f.DB[J.config],TRIGGER:f.DB[J.TRIGGER]})),i=React.useCallback(()=>r?(at(r),Promise.resolve()):fs(s),[r,s]);ln(()=>{te(i)});const h=Tn(f=>f.AppBarTitle[ct.title]),[p,y]=React.useState(null),[x,S]=React.useState(!1),j=()=>{S(!1)},k=!!p,{setMenuToggle:E,...P}=t,M=React.useContext(Te),[q,T]=React.useState(!1),{subtitle:v,id:m}=st();return e.jsxs(React.StrictMode,{children:[e.jsxs(qt,{position:"sticky",className:G.AppBar??"",...P,children:[e.jsx(Ut,{onClick:M?E:T.bind(null,!0),className:G.menuIcon??"",size:"large",children:e.jsx(Qt,{})}),e.jsx("span",{onClick:()=>{i().then(()=>{const _=prompt("运行单条SQL代码")?.trim();_&&ne.transaction(Q=>{Q.executeSql(_,[])},Q=>{c({type:w.OPENTRUE,payload:{[$.alertText]:`执行失败, 原因：${Q.message}`,[$.severity]:F.error}})},()=>{c({type:w.OPENTRUE,payload:{[$.alertText]:`${_}
执行成功`,[$.severity]:F.success}})})})},children:(h||m)??ue}),e.jsxs(D,{className:classNames(G.Avatar,{[G.open??""]:k}),onClick:f=>{y(f.currentTarget)},children:[e.jsx(Ht,{}),e.jsx("span",{children:localStorage.getItem("HJX")??"HJX, HJX"}),e.jsx(Wt,{})]})]}),e.jsxs(zt,{anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:k,onClose:()=>{y(null)},className:G.Popover??"",children:[v===o?.[0]?.path&&e.jsx(tt,{control:e.jsx(Gt,{}),label:"索引",onChange:(f,_)=>{s({type:de.SET,payload:{index:_}})},checked:d??!1}),m&&e.jsxs(ft,{fullWidth:!0,onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{y(null),S(!0)}),children:["重置",m,"表"]}),e.jsx(D,{fullWidth:!0,onClick:()=>{confirm("确定要删库跑路吗？")&&(hs(),localStorage.clear(),o?.map(f=>f.children).flat().forEach(f=>{Xe(f,c,`删${f}库跑路成功! 5秒后自动刷新`)})),j()},color:"error",variant:"outlined",children:"删库跑路"})]}),e.jsx(ms,{open:x,handleClose:j,title:`确定要重置${m}表吗？`,onClick:()=>{Xe(m??"",c,`重置${m}表成功! 5秒后自动刷新`),j()}}),e.jsx(Kt,{anchor:"left",open:!M&&q,onClose:T.bind(null,!1),children:e.jsx(Se,{})})]})}const gs="_MainFrame_jou1o_1",ys={MainFrame:gs};function js(){const[t,{toggle:s}]=dn(!0),c=React.useContext(Te);return e.jsxs(React.StrictMode,{children:[e.jsx(xs,{setMenuToggle:s}),e.jsxs("div",{className:ys.MainFrame,style:{"--gap":t?"9q":0},children:[e.jsx(et,{in:t&&c,orientation:"horizontal",children:e.jsx(B,{elevation:24,children:e.jsx(Se,{})})}),e.jsx("div",{children:e.jsx(nn,{})})]})]})}const xt=React.lazy(()=>hn(()=>Promise.resolve().then(()=>Gn),void 0,import.meta.url)),vs=[{path:"",id:"目录",element:e.jsx(React.Suspense,{fallback:e.jsx(ve,{}),children:e.jsx(xt,{})})}],gt=(...t)=>`/${t.join("/")}`;function Ss(){return e.jsx(sn,{children:e.jsxs(xe,{element:e.jsx(js,{}),children:[e.jsx(xe,{index:!0,element:e.jsx(React.Suspense,{fallback:e.jsx(Ye,{open:!0,children:e.jsx(ve,{})}),children:e.jsx(xt,{})})}),e.jsx(xe,{path:":subtitle/:id",element:e.jsx(us,{})})]})})}const Ts=Redux.combineReducers({SnackBar:os,AppBarTitle:Sn,DB:kn}),yt=Redux.legacy_createStore(Ts,Redux.applyMiddleware(ReduxThunk));yt.subscribe(()=>{});const Rs="_Snackbar_1t4e7_1",bs={Snackbar:Rs};function Es(){const{open:t,alertText:s,severity:c}=ut(r=>({open:r.SnackBar.open,alertText:r.SnackBar.alertText,severity:r.SnackBar.severity})),d=ReactRedux.useDispatch(),o=(r,i)=>{i!=="clickaway"&&d({type:w.OPENFALSE})};return e.jsx(React.StrictMode,{children:e.jsx(Yt,{open:!!(t&&s),autoHideDuration:6e3,onClose:o,message:s,className:bs.Snackbar??"",children:e.jsx(nt,{onClose:o,severity:c,variant:"filled",children:s})})})}const jt={loadingDelay:300,throttleWait:300},Te=React.createContext(!1),_s=()=>{const t=Zt("(orientation:landscape)");return e.jsx(React.StrictMode,{children:e.jsx(Ze,{injectFirst:!0,children:e.jsxs(en,{children:[e.jsx(tn,{}),e.jsx(ReactRedux.Provider,{store:yt,children:e.jsxs(Te.Provider,{value:t,children:[e.jsx(an,{children:e.jsx(Ss,{})}),e.jsx(Es,{})]})})]})})})};ReactDOM.render(e.jsx(React.StrictMode,{children:e.jsx(_s,{})}),document.body);
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
