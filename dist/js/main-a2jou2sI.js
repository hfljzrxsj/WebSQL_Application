import{j as e}from"./react-ejZHSj7z.js";import{B as Ye,C as ve,S as Ze,L as Et,D as _t,a as $t,d as ye,b as et,c as Ct,P as B,e as kt,A as Ae,f as Ie,T as Be,g as Fe,h as qe,i as le,F as tt,j as Lt,k as D,l as st,m as Nt,n as Dt,o as wt,p as Ue,q as Qe,r as Pt,s as Ot,t as Mt,u as At,v as It,I as Bt,w as Ft,M as fe,x as je,y as qt,z as Ut,E as Qt,G as Ht,H as Wt,J as zt,K as Gt,N as Kt,O as Jt,Q as Vt,R as Xt,U as Yt,V as Zt,W as es,X as ts}from"./@mui-_A7eRbnw.js";import{d as nt,O as ss,e as ns,f as xe}from"./react-router-y82kxMFL.js";import{N as os,H as as}from"./react-router-dom-v3GnXs1D.js";import{u as ot,a as re,b as ce,c as I,d as rs,e as cs,f as is,g as ls}from"./ahooks-LOzqvy8i.js";import{c as at}from"./copy-text-to-clipboard-SBA1EQaE.js";import"./object-assign-4_VUvG2Z.js";import"./@emotion-tNa4IMmz.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./@babel-moqvDIRK.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@remix-run-Tfa50bkj.js";import"./tslib-g6pQwBLH.js";import"./lodash-liWoq_f8.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function c(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(o){if(o.ep)return;o.ep=!0;const r=c(o);fetch(o.href,r)}})();const ds="modulepreload",us=function(t,n){return new URL(t,n).href},He={},ps=function(n,c,d){let o=Promise.resolve();if(c&&c.length>0){const r=document.getElementsByTagName("link");o=Promise.all(c.map(l=>{if(l=us(l,d),l in He)return;He[l]=!0;const h=l.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!d)for(let S=r.length-1;S>=0;S--){const j=r[S];if(j.href===l&&(!h||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${p}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":ds,h||(x.as="script",x.crossOrigin=""),x.href=l,document.head.appendChild(x),h)return new Promise((S,j)=>{x.addEventListener("load",S),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${l}`)))})}))}return o.then(()=>n()).catch(r=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r})},hs="_AppBar_n6byb_1",ms="_menuIcon_n6byb_11",fs="_Avatar_n6byb_19",xs="_open_n6byb_27",gs="_Popover_n6byb_39",ys="_DialogActions_n6byb_57",G={AppBar:hs,menuIcon:ms,Avatar:fs,open:xs,Popover:gs,DialogActions:ys};var rt=(t=>(t.SET_TITLE="SET_TITLE",t))(rt||{}),ct=(t=>(t.title="title",t))(ct||{});const js={title:""},vs=(t=js,n)=>{const{type:c,payload:d={}}=n;switch(c){case"SET_TITLE":return{...t,...d};default:return t}},Ss=ReactRedux.useSelector,Ts="_NavLink_1kxee_1",Rs="_CollapseClick_1kxee_8",bs="_ArrowDownIcon_1kxee_11",Es="_overview_1kxee_15",_s="_ListItemButton_1kxee_20",K={NavLink:Ts,CollapseClick:Rs,ArrowDownIcon:bs,overview:Es,ListItemButton:_s};var de=(t=>(t.SET="SET",t))(de||{}),J=(t=>(t.config="config",t.index="index",t.TRIGGER="TRIGGER",t))(J||{});const $s={config:[],index:!1,TRIGGER:""},Cs=(t=$s,n)=>{const{type:c,payload:d={}}=n;switch(c){case"SET":return{...t,...d};default:return t}},it=ReactRedux.useSelector,lt=({className:t,...n})=>e.jsx(Ct,{className:classNames(t,K.ListItemButton),...n}),dt=t=>{const{text:n="",path:c="",setOpen:d,...o}=t,[r,l]=React.useState(!1),[h,p]=React.useState(!0),y=ReactRedux.useDispatch();return e.jsx(lt,{selected:r,disableGutters:!0,onClick:x=>{const{target:S}=x;if(HTMLDivElement.prototype.isPrototypeOf(S)&&S instanceof HTMLDivElement&&Object.prototype.toString.call(S)==="[object HTMLDivElement]"&&S.constructor===HTMLDivElement&&typeof S=="object"){const{children:j,childNodes:k}=S,E=j.item(0)??j[0]??k[0]??k.values().next().value??document.createElement("a");HTMLAnchorElement.prototype.isPrototypeOf(E)&&E instanceof HTMLAnchorElement&&Object.prototype.toString.call(E)==="[object HTMLAnchorElement]"&&E.constructor===HTMLAnchorElement&&typeof E=="object"&&E.click()}},...o,children:e.jsx(os,{to:c,className:({isActive:x})=>ReactDOM.unstable_batchedUpdates(()=>(l(x),x&&h&&d?.(),p(!1),K.NavLink)),onClick:()=>{y({type:rt.SET_TITLE,payload:{title:n}}),document.title=n},children:n})})},ks=({item:t})=>{const{children:n,id:c,path:d=""}=t,[o,r]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsxs(lt,{onClick:r.bind(null,!o),className:classNames(K.CollapseClick,{[K.CollapseClickActive??""]:o}),children:[e.jsx($t,{primary:c}),e.jsx(ye,{className:classNames({[K.ArrowDownIcon??""]:o})})]}),e.jsx(et,{in:o,children:e.jsx("ul",{children:n?.map((l,h)=>e.jsx("li",{children:e.jsx(dt,{text:l.id??"",path:gt(d,l.path??""),setOpen:r.bind(null,!0)})},h))})})]})};function Se(){const t=ReactRedux.useDispatch(),{data:n,loading:c}=ot(()=>axios.get("assets/config.json").then(o=>{const{data:r}=o;return t({type:de.SET,payload:{config:r}}),r}).catch(console.error),jt);if(c||!n)return e.jsx(Ye,{open:!0,children:e.jsx(ve,{})});const d=n.map(o=>({id:o.path,path:o.path,children:o.children.map(r=>({path:r,id:r}))}));return e.jsx(React.StrictMode,{children:e.jsx(Ze,{injectFirst:!0,children:[...vn,...d].map((o,r)=>{const{children:l,id:h="",path:p=""}=o;return e.jsxs(React.StrictMode,{children:[e.jsx(Et,{children:l?e.jsx(ks,{item:o}):e.jsx(dt,{text:h,path:gt(p),className:K.overview??""})},r),e.jsx(_t,{})]})})})})}const Ls="_Paper_p9qzm_1",Ns={Paper:Ls},{queueMicrotask:Ds,setTimeout:ws,Promise:We,requestIdleCallback:Ps,requestAnimationFrame:Os,console:ze,MessageChannel:Ms}=window??self??globalThis??global??void 0,te=(t=()=>{})=>{const n=(c=()=>{})=>Ps?.(()=>ws?.(()=>Os?.(()=>Ds?.(()=>We?.resolve?.()?.then?.(()=>{const{port1:d,port2:o}=new Ms;o.onmessage=()=>c?.(),d?.postMessage?.(null)}).catch?.(ze?.error)))));return new We(c=>n?.(c))?.then?.(()=>n?.(t)).catch?.(ze?.error)},{addEventListener:As,queueMicrotask:Is,setTimeout:Bs,Promise:Ge,requestIdleCallback:Fs,requestAnimationFrame:qs,console:Ke,MessageChannel:Us}=window??self??globalThis??global??void 0,Qs=(t=()=>{})=>{const n=(c=()=>{})=>Fs?.(()=>Bs?.(()=>qs?.(()=>Is?.(()=>Ge?.resolve?.()?.then?.(()=>{const{port1:d,port2:o}=new Us;o.onmessage=()=>c?.(),d?.postMessage?.(null)}).catch?.(Ke?.error)))));return As("load",()=>new Ge(c=>n?.(c))?.then?.(()=>n?.(t)).catch?.(Ke?.error))},Je={elevation:24,className:Ns.Paper??""},ue="WebSQL",{addEventListener:Qn,document:Hs,navigator:Hn,Object:Wn,console:zn}=window??self??globalThis??global??void 0;Qs(()=>Hs.title=ue);function Ws(){return e.jsxs(React.StrictMode,{children:[e.jsx(B,{...Je,children:ue}),e.jsx(B,{...Je,children:e.jsx(Se,{})})]})}const zs=Object.freeze(Object.defineProperty({__proto__:null,default:Ws,documentTitle:ue},Symbol.toStringTag,{value:"Module"})),Gs="_Paper_1ieip_2",Ks="_Input_1ieip_22",Js="_sqlInput_1ieip_41",Vs="_AccordionDetails_1ieip_48",Xs="_last_1ieip_57",Ys="_fullWidth_1ieip_65",Zs="_aLink_1ieip_71",en="_Skeleton_1ieip_79",tn="_dialog_1ieip_84",N={Paper:Gs,Input:Ks,sqlInput:Js,AccordionDetails:Vs,last:Xs,fullWidth:Ys,aLink:Zs,Skeleton:en,dialog:tn};var w=(t=>(t.SnackbarAlert="SnackbarAlert",t.OPENTRUE="OPENTRUE",t.OPENFALSE="OPENFALSE",t))(w||{}),$=(t=>(t.alertText="alertText",t.open="open",t.severity="severity",t))($||{}),F=(t=>(t.error="error",t.info="info",t.success="success",t.warning="warning",t))(F||{});const sn={alertText:"",open:!1,severity:"success"},nn=(t=sn,n)=>{const{type:c,payload:d={}}=n,o=r=>({...t,...d,open:r});switch(c){case"OPENFALSE":return o(!1);case"OPENTRUE":return o(!0);default:return t}},ut=ReactRedux.useSelector,{entries:ee,values:on,keys:ge}=Object,an=window??global??globalThis??self??void 0,pt="table",rn="1.0",cn=pt,ln=2*1024*1024,se=an.openDatabase(pt,rn,cn,ln,t=>{}),dn="未选择",ht=t=>{const{i:n,...c}=t,{foreignTable:d,foreignKey:o,id:r}=n,[l,h]=cs();return React.useEffect(()=>{d&&o&&se.transaction(p=>{p.executeSql(`SELECT * FROM ${d}`,[],function(y,x){h(x.rows)})},p=>{},()=>{})},[d,o]),e.jsxs(It,{fullWidth:!0,...c,children:[e.jsx(Bt,{title:n.id,children:n.name}),e.jsxs(Ft,{fullWidth:!0,...c,children:[e.jsx(fe,{value:void 0,children:dn}),n.enum?n.enum?.map((p,y)=>e.jsx(fe,{value:y,children:p},y)):new Array(l?.length).fill(" ").map((p,y)=>e.jsx(fe,{value:l?.item(y)[r??""],children:l?.item(y)[o??""]},y))]})]})},Y=0,Z=t=>t!=null&&t!=="",mt=t=>!!t?.type,ie=(t,n)=>mt(t)?n:`'${n}'`;function un(){const t=ReactRedux.useDispatch(),{subtitle:n,id:c}=nt(),{index:d,config:o}=it(s=>({index:s.DB[J.index],config:s.DB[J.config]})),{data:r,loading:l,refresh:h}=ot(()=>axios.get(`assets/${c}.json`).then(s=>s.data).catch(console.error),jt);re(()=>{h()},[c]);const p=c??"",[y,x,S]=ce(0),[j,k,E]=ce(10),[P,M,q]=ce(0),T=Array.isArray(r)?r??[]:[],v=T.filter(s=>s.primary),m=T.reduce((s,i)=>{const a=i.foreignKey;return a&&(s[a]=i),s[i.id]=i,s},{}),f=T.map(s=>s.id),_=T.filter(s=>!!s.foreignKey).map(s=>String(s.foreignKey)),pe=[...T.filter(s=>!s.foreignKey).map(s=>String(s.id)),..._],[H,A,U]=ce(""),[W,z]=I({}),Re=ee(W).filter(([s,i])=>Z(i)&&f.includes(s)),be=React.useCallback(s=>T.reduce((i,a)=>(i[a.id]=a.type?!1:s,i),{}),[T]),Ee=be(!1),[V,_e]=I(Ee),vt=on(V),[ne,$e]=I(Ee),Ce=d&&n===o?.[0]?.path?` INDEXED BY ${p}_Index`:"",ke=T.filter(s=>s.foreignTable).reduce((s,i)=>{const{foreignTable:a,id:u}=i;return s+`LEFT JOIN ${a} ON ${p}.${u}=${a}.${u} `}," ").trimEnd(),Le=` LIMIT ${E()} OFFSET ${E()*S()}`,he=`SELECT * FROM ${p}${Ce}${ke}${Le};`,Ne=!Re.length?"":" WHERE "+Re.reduce((s,i)=>{const[a,u]=i;return Z(u)?Array.isArray(u)?[...s,`(${a} BETWEEN ${u[0]} AND ${u[1]})`]:[...s,`${p}.${a} ${ne[a]?`LIKE "%${String(u)}%"`:`= ${ie(m[a],u)}`} `]:s},[]).join(" and ").trimEnd(),{run:oe}=rs(React.useCallback((s=H)=>{const i=s.trim().split(";");se.transaction(a=>{for(let u of i)u&&a.executeSql(u,[],function(R,b){const{rows:g,rowsAffected:C}=b;C===0&&g?(Tt({rows:g}),M(g.length)):t({type:w.OPENTRUE,payload:{[$.alertText]:`${u.split(" ")[0]}成功！`,[$.severity]:F.success}})})},a=>{Pe({severity:"error",alertText:`执行失败, 原因：${a.message}`}),t({type:w.OPENTRUE,payload:{[$.alertText]:`执行失败, 原因：${a.message}`,[$.severity]:F.error}})},()=>{se.transaction(a=>{a.executeSql(`SELECT COUNT(*) FROM ${p}${Ne};`,[],function(u,R){const{rows:b}=R;M(b.item(0)["COUNT(*)"])})},a=>{},()=>{})})},[H,p]));React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{if(!r)return;A(he),z(ge(W).reduce((i,a)=>(i[a]=void 0,i),{}));const s={...be(!1),...[...ge(V),...ge(ne)].reduce((i,a)=>(i[a]=!1,i),{})};_e(s),$e(s),te(()=>oe(he))}),[r]);const[St,Tt]=I({insertId:0,rowsAffected:0,rows:{length:0,item:()=>{}}});re(()=>{const s=vt.every(i=>!i)?"*":ee(V).reduce((i,a)=>{const[u,R]=a,b=m[u];return R?[...i,`${b?.foreignTable??p}.${b?.foreignKey??u}`]:i},[]).join(", ");A(`SELECT ${s} FROM ${p}${Ce}${ke}${Ne}${Le};`)},[W,ne,V,y,j,d]),re(()=>{te(()=>oe(U()))},[y,j]);const L=St?.rows,De=React.useMemo(()=>L.length?Object.keys(L.item(0)??{}).filter(s=>pe.includes(s)):[],[L]),[we,Pe]=I({severity:"info",alertText:"待操作"}),{open:Rt}=ut(s=>({open:s.SnackBar.open}));re(()=>ReactDOM.unstable_batchedUpdates(()=>{te(()=>{const s={severity:"success",alertText:`执行成功, 查到 ${q()??L?.length} 条记录`};Pe(s),Rt||t({type:w.OPENTRUE,payload:s})})}),[L]);const[Oe,ae]=I({open:!1,type:"UD",dialogData:L.length?L.item(0):{}}),{dialogData:bt}=Oe,Me=s=>v.map(i=>{const{id:a}=i,u=s[a];return`${a}=${ie(i,u)}`}).join(" AND ");return l||T.length===0?e.jsx(kt,{className:N.Skeleton??"",variant:"rounded",animation:"wave"}):e.jsxs(e.Fragment,{children:[e.jsxs(B,{elevation:24,className:N.Paper??"",children:[e.jsxs(Ae,{elevation:24,children:[e.jsx(Ie,{expandIcon:e.jsx(ye,{}),children:e.jsx(Be,{children:"筛选器"})}),e.jsx(Fe,{className:N.Input??"",children:T.map((s,i)=>{const{id:a}=s;return e.jsxs(B,{elevation:24,className:classNames({[N.last??""]:s.type==="between"})??"",title:a,children:[e.jsx(qe,{title:a,onChange:(u,R)=>{_e({[a]:R})},checked:V[a]}),(()=>{switch(s.type){case"enum":return e.jsx(ht,{fullWidth:!0,label:s.name,title:a,onChange:u=>{const{target:R}=u;if("value"in R){const b=R.value;z({[a]:b})}},i:s});case"between":{const u=W[a];return e.jsxs(e.Fragment,{children:[e.jsx("span",{title:a,children:s.name}),e.jsx(Lt,{title:a,min:s.min??0,max:s.max??100,step:s.step??1,value:Array.isArray(u)?u:[0,100],onChange:(R,b,g)=>{if(!Array.isArray(b))return;const[C,O]=b,{id:me}=s;if(C!==void 0&&O!==void 0)if(O-C<Y)if(g===0){const X=Math.min(C,100-Y);z({[me]:[X,X+Y]})}else{const X=Math.max(O,Y);z({[me]:[X-Y,X]})}else z({[me]:b})},valueLabelDisplay:"on",disableSwap:!0})]})}default:return e.jsxs(e.Fragment,{children:[e.jsx(le,{"aria-autocomplete":"both",label:s.name,title:a,type:s.type==="number"?"number":"search",onChange:u=>{z({[a]:u.target.value})}}),e.jsx(tt,{title:a,control:e.jsx(qe,{title:a}),label:"模糊搜索",onChange:(u,R)=>$e({[a]:R}),checked:ne[a]})]})}})()]},i)})})]}),e.jsxs(Ae,{elevation:24,className:N.sqlInput??"",children:[e.jsx(Ie,{expandIcon:e.jsx(ye,{}),children:e.jsx(Be,{children:"SQL执行"})}),e.jsxs(Fe,{className:N.AccordionDetails??"",children:[e.jsx(le,{multiline:!0,autoFocus:!0,fullWidth:!0,"aria-autocomplete":"both",label:"SQL",onChange:s=>A(s.target.value),value:H}),e.jsx(D,{size:"large",variant:"contained",onClick:s=>{x(i=>(i||oe(U()),0))},children:"Transaction"})]})]}),e.jsx(B,{elevation:24,className:N.fullWidth??"",children:e.jsx(st,{severity:we.severity,variant:"filled",children:we.alertText})}),e.jsxs(B,{elevation:24,children:[e.jsx(Nt,{children:e.jsxs(Dt,{stickyHeader:!0,children:[e.jsx(wt,{children:e.jsx(Ue,{children:De.map((s,i)=>e.jsx(Qe,{align:"center",title:s,children:m[s]?.name??s},i))})}),e.jsx(Pt,{children:new Array(L.length).fill(" ").map((s,i)=>e.jsx(Ue,{hover:!0,children:De.map((a,u)=>{const R=m[a],b=R?.id,g=L?.item(i),C=R?.enum,O=g[a];return React.createElement(Qe,{...b&&{title:String(g[b])},key:u,align:"center",...m[a]?.primary&&{onClick:()=>{ae({open:!0,type:"UD",dialogData:g})},className:N.aLink??""}},C&&Z(O)?C[Number(O)]:typeof O=="number"?Math.round(O*1e3)/1e3:O)})},i))})]})}),e.jsx(Ot,{component:"div",count:P??L?.length??10,rowsPerPage:j,page:y,onPageChange:(s,i)=>{x(i)},onRowsPerPageChange:s=>ReactDOM.unstable_batchedUpdates(()=>{k(+s.target.value),x(0)}),labelDisplayedRows:s=>`${s.from}-${isNaN(s.to)?1:s.to}/共${s.count??0}项`,labelRowsPerPage:"每页行数："})]}),e.jsx(B,{elevation:24,children:e.jsx(Mt,{color:"primary",size:"large",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{ae({open:!0,type:"C",dialogData:T.reduce((s,i)=>(s[i.id]="",s),{})})}),children:e.jsx(At,{})})})]}),e.jsx(pn,{onClose:()=>ae({open:!1}),className:N.dialog??"",...Oe,dialogDataProps:bt,idToNameRecord:m,idToNameKeys:f,idToNamePrimary:v,idToName:T,comfirm:s=>ReactDOM.unstable_batchedUpdates(()=>{A(s),oe(`${s};${he}`),ae({open:!1})}),modifySQL:s=>{const i=ee(s).filter(([a])=>f.includes(a)&&!m[a]?.primary).map(([a,u])=>`${a}=${Z(u)?ie(m[a],u):"null"}`).join(", ");return`UPDATE ${p} SET ${i} WHERE ${Me(s)};`},deleteSQL:s=>`DELETE FROM ${p} WHERE ${Me(s)};`,insertSQL:s=>{const i=ee(s).filter(([g,C])=>Z(C)&&f.includes(g)),a=v.map(g=>g.id),u=i.map(([g])=>g);if(a.some(g=>!u.includes(g)))return t({type:w.OPENTRUE,payload:{[$.alertText]:"还有必填项未填写",[$.severity]:F.warning}}),"";const R=i.map(([g])=>g).join(", "),b=i.map(([g,C])=>`${ie(m[g],C)}`).join(", ");return`INSERT INTO ${p} (${R}) VALUES (${b});`}})]})}const pn=t=>{const{type:n,dialogDataProps:c,idToNameRecord:d,idToNameKeys:o,modifySQL:r,deleteSQL:l,comfirm:h,idToNamePrimary:p,insertSQL:y,idToName:x,...S}=t,[j,k]=I(c),[E,P]=I({open:!1,text:"",code:""}),M=n==="UD";React.useEffect(()=>{k(c)},[c,open]);const q=()=>{P({open:!1})},T=(v,m)=>M?{defaultValue:v,disabled:!!m}:{required:!!m};return e.jsxs(e.Fragment,{children:[e.jsxs(je,{...S,children:[ee(j??{}).filter(([v])=>o.includes(v)).map(([v,m],f)=>{const _=d[v],Q=_?.type,pe=mt(_),H=_.primary;return _&&Q==="enum"?e.jsx(ht,{i:_,...T(m,H),label:_.name,title:v,onChange:A=>{const{target:U}=A;if("value"in U){const W=U.value;k({[v]:W})}}},f):React.createElement(le,{"aria-autocomplete":"both",label:_.name,title:v,type:pe?"number":"search",...T(m,H),key:f,onChange:A=>{const{value:U}=A.target;k({[v]:U})}})}),M?e.jsxs(e.Fragment,{children:[e.jsx(D,{size:"large",variant:"contained",onClick:()=>{P({open:!0,text:"确认修改？",code:r(j)})},children:"修改"}),e.jsx(D,{size:"large",variant:"outlined",color:"error",onClick:()=>{P({open:!0,text:"确认删除？",code:l(j)})},children:"删除"})]}):e.jsx(D,{size:"large",variant:"contained",onClick:()=>{const v=y(j);v&&P({open:!0,text:"确认新增？",code:v})},children:"新增"})]}),e.jsxs(je,{open:E.open,onClose:q,className:N.dialog??"",children:[e.jsx("h1",{children:E.text}),e.jsx(le,{defaultValue:E.code,onChange:v=>P({code:v.target.value}),autoFocus:!0,"aria-autocomplete":"both",label:"sql",type:"search",multiline:!0,fullWidth:!0}),e.jsx(D,{size:"large",variant:"outlined",color:"warning",onClick:()=>{h(E.code),q()},children:"确认"}),e.jsx(D,{size:"large",variant:"contained",onClick:q,children:"取消"})]})]})},{error:Ve}=console,ft=({...t})=>e.jsx(D,{variant:"contained",size:"large",...t}),hn=()=>window.caches?.keys()?.then(t=>t.forEach(n=>window.caches?.delete(n))).catch(console.error),mn=t=>{const{open:n=!1,handleClose:c,onClick:d,title:o,content:r}=t;return e.jsxs(je,{open:n,keepMounted:!0,onClose:c,children:[e.jsx(Jt,{children:o}),r&&e.jsx(Vt,{children:r}),e.jsxs(Xt,{className:G.DialogActions??"",children:[e.jsx(D,{variant:"outlined",onClick:c,size:"large",children:"取消"}),e.jsx(ft,{onClick:d,children:"确定"})]})]})},Xe=(t,n,c)=>{let d=setTimeout(()=>{te(()=>location.reload())},5e3);fetch(`assets/${t}.sql`).then(o=>o.text()).then(o=>{const r=o.trim().split(";");se.transaction(l=>{for(let h of r)h&&l.executeSql(h+";",[])},l=>{n({type:w.OPENTRUE,payload:{[$.alertText]:`执行失败, 原因：${l.message}`,[$.severity]:F.error}}),clearTimeout(d)},()=>{n({type:w.OPENTRUE,payload:{[$.alertText]:c,[$.severity]:F.success}})})})},fn=t=>fetch("assets/TRIGGER.sql").then(n=>n.text()).then(n=>(t({type:de.SET,payload:{TRIGGER:n}}),n??"")).then(at,Ve).catch(Ve);function xn(t){const n=ReactRedux.useDispatch(),c=ReactRedux.useDispatch(),{index:d,config:o,TRIGGER:r}=it(f=>({index:f.DB[J.index],config:f.DB[J.config],TRIGGER:f.DB[J.TRIGGER]})),l=React.useCallback(()=>r?(at(r),Promise.resolve()):fn(n),[r,n]);is(()=>{te(l)});const h=Ss(f=>f.AppBarTitle[ct.title]),[p,y]=React.useState(null),[x,S]=React.useState(!1),j=()=>{S(!1)},k=!!p,{setMenuToggle:E,...P}=t,M=React.useContext(Te),[q,T]=React.useState(!1),{subtitle:v,id:m}=nt();return e.jsxs(React.StrictMode,{children:[e.jsxs(qt,{position:"sticky",className:G.AppBar??"",...P,children:[e.jsx(Ut,{onClick:M?E:T.bind(null,!0),className:G.menuIcon??"",size:"large",children:e.jsx(Qt,{})}),e.jsx("span",{onClick:()=>{l().then(()=>{const _=prompt("运行单条SQL代码")?.trim();_&&se.transaction(Q=>{Q.executeSql(_,[])},Q=>{c({type:w.OPENTRUE,payload:{[$.alertText]:`执行失败, 原因：${Q.message}`,[$.severity]:F.error}})},()=>{c({type:w.OPENTRUE,payload:{[$.alertText]:`${_}
执行成功`,[$.severity]:F.success}})})})},children:(h||m)??ue}),e.jsxs(D,{className:classNames(G.Avatar,{[G.open??""]:k}),onClick:f=>{y(f.currentTarget)},children:[e.jsx(Ht,{}),e.jsx("span",{children:localStorage.getItem("HJX")??"HJX, HJX"}),e.jsx(Wt,{})]})]}),e.jsxs(zt,{anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:k,onClose:()=>{y(null)},className:G.Popover??"",children:[v===o?.[0]?.path&&e.jsx(tt,{control:e.jsx(Gt,{}),label:"索引",onChange:(f,_)=>{n({type:de.SET,payload:{index:_}})},checked:d??!1}),m&&e.jsxs(ft,{fullWidth:!0,onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{y(null),S(!0)}),children:["重置",m,"表"]}),e.jsx(D,{fullWidth:!0,onClick:()=>{confirm("确定要删库跑路吗？")&&(hn(),localStorage.clear(),o?.map(f=>f.children).flat().forEach(f=>{Xe(f,c,`删${f}库跑路成功! 5秒后自动刷新`)})),j()},color:"error",variant:"outlined",children:"删库跑路"})]}),e.jsx(mn,{open:x,handleClose:j,title:`确定要重置${m}表吗？`,onClick:()=>{Xe(m??"",c,`重置${m}表成功! 5秒后自动刷新`),j()}}),e.jsx(Kt,{anchor:"left",open:!M&&q,onClose:T.bind(null,!1),children:e.jsx(Se,{})})]})}const gn="_MainFrame_jou1o_1",yn={MainFrame:gn};function jn(){const[t,{toggle:n}]=ls(!0),c=React.useContext(Te);return e.jsxs(React.StrictMode,{children:[e.jsx(xn,{setMenuToggle:n}),e.jsxs("div",{className:yn.MainFrame,style:{"--gap":t?"9q":0},children:[e.jsx(et,{in:t&&c,orientation:"horizontal",children:e.jsx(B,{elevation:24,children:e.jsx(Se,{})})}),e.jsx("div",{children:e.jsx(ss,{})})]})]})}const xt=React.lazy(()=>ps(()=>Promise.resolve().then(()=>zs),void 0,import.meta.url)),vn=[{path:"",id:"目录",element:e.jsx(React.Suspense,{fallback:e.jsx(ve,{}),children:e.jsx(xt,{})})}],gt=(...t)=>`/${t.join("/")}`;function Sn(){return e.jsx(ns,{children:e.jsxs(xe,{element:e.jsx(jn,{}),children:[e.jsx(xe,{index:!0,element:e.jsx(React.Suspense,{fallback:e.jsx(Ye,{open:!0,children:e.jsx(ve,{})}),children:e.jsx(xt,{})})}),e.jsx(xe,{path:":subtitle/:id",element:e.jsx(un,{})})]})})}const Tn=Redux.combineReducers({SnackBar:nn,AppBarTitle:vs,DB:Cs}),yt=Redux.legacy_createStore(Tn,Redux.applyMiddleware(ReduxThunk));yt.subscribe(()=>{});const Rn="_Snackbar_1t4e7_1",bn={Snackbar:Rn};function En(){const{open:t,alertText:n,severity:c}=ut(r=>({open:r.SnackBar.open,alertText:r.SnackBar.alertText,severity:r.SnackBar.severity})),d=ReactRedux.useDispatch(),o=(r,l)=>{l!=="clickaway"&&d({type:w.OPENFALSE})};return e.jsx(React.StrictMode,{children:e.jsx(Yt,{open:!!(t&&n),autoHideDuration:6e3,onClose:o,message:n,className:bn.Snackbar??"",children:e.jsx(st,{onClose:o,severity:c,variant:"filled",children:n})})})}const jt={loadingDelay:300,throttleWait:300},Te=React.createContext(!1),_n=()=>{const t=Zt("(orientation:landscape)");return e.jsx(React.StrictMode,{children:e.jsx(Ze,{injectFirst:!0,children:e.jsxs(es,{children:[e.jsx(ts,{}),e.jsx(ReactRedux.Provider,{store:yt,children:e.jsxs(Te.Provider,{value:t,children:[e.jsx(as,{children:e.jsx(Sn,{})}),e.jsx(En,{})]})})]})})})};ReactDOM.render(e.jsx(React.StrictMode,{children:e.jsx(_n,{})}),document.body);
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
