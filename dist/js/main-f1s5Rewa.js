import{j as e}from"./react-ejZHSj7z.js";import{B as Xe,C as ye,S as Ye,L as bt,D as Tt,a as Et,d as fe,b as Ze,c as Rt,P as A,e as _t,A as Ae,f as Ie,T as Be,g as Fe,h as qe,i as ie,F as et,j as $t,k as N,l as tt,m as Ct,n as Lt,o as kt,p as Ue,q as Qe,r as Dt,s as Nt,t as wt,u as Pt,v as Ot,I as Mt,w as At,M as he,x as ge,y as It,z as Bt,E as Ft,G as qt,H as Ut,J as Qt,K as Ht,N as zt,O as Wt,Q as Kt,R as Vt,U as Gt,V as Jt,W as Xt,X as Yt}from"./@mui-_A7eRbnw.js";import{d as st,O as Zt,e as es,f as me}from"./react-router-y82kxMFL.js";import{N as ts,H as ss}from"./react-router-dom-v3GnXs1D.js";import{u as nt,a as ae,b as oe,c as M,d as ns,e as as,f as os,g as rs}from"./ahooks-LOzqvy8i.js";import"./object-assign-4_VUvG2Z.js";import"./@emotion-tNa4IMmz.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./@babel-moqvDIRK.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@remix-run-Tfa50bkj.js";import"./tslib-g6pQwBLH.js";import"./lodash-liWoq_f8.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function c(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(n){if(n.ep)return;n.ep=!0;const o=c(n);fetch(n.href,o)}})();const cs="modulepreload",is=function(t,a){return new URL(t,a).href},He={},ls=function(a,c,d){let n=Promise.resolve();if(c&&c.length>0){const o=document.getElementsByTagName("link");n=Promise.all(c.map(l=>{if(l=is(l,d),l in He)return;He[l]=!0;const m=l.endsWith(".css"),h=m?'[rel="stylesheet"]':"";if(!!d)for(let S=o.length-1;S>=0;S--){const j=o[S];if(j.href===l&&(!m||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${h}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":cs,m||(x.as="script",x.crossOrigin=""),x.href=l,document.head.appendChild(x),m)return new Promise((S,j)=>{x.addEventListener("load",S),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>a()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},ds="_AppBar_n6byb_1",us="_menuIcon_n6byb_11",ps="_Avatar_n6byb_19",hs="_open_n6byb_27",ms="_Popover_n6byb_39",xs="_DialogActions_n6byb_57",z={AppBar:ds,menuIcon:us,Avatar:ps,open:hs,Popover:ms,DialogActions:xs};var at=(t=>(t.SET_TITLE="SET_TITLE",t))(at||{}),ot=(t=>(t.title="title",t))(ot||{});const fs={title:""},gs=(t=fs,a)=>{const{type:c,payload:d={}}=a;switch(c){case"SET_TITLE":return{...t,...d};default:return t}},ys=ReactRedux.useSelector,js="_NavLink_1kxee_1",vs="_CollapseClick_1kxee_8",Ss="_ArrowDownIcon_1kxee_11",bs="_overview_1kxee_15",Ts="_ListItemButton_1kxee_20",W={NavLink:js,CollapseClick:vs,ArrowDownIcon:Ss,overview:bs,ListItemButton:Ts};var je=(t=>(t.SET="SET",t))(je||{}),Y=(t=>(t.config="config",t.index="index",t))(Y||{});const Es={config:[],index:!1},Rs=(t=Es,a)=>{const{type:c,payload:d={}}=a;switch(c){case"SET":return{...t,...d};default:return t}},rt=ReactRedux.useSelector,ct=({className:t,...a})=>e.jsx(Rt,{className:classNames(t,W.ListItemButton),...a}),it=t=>{const{text:a="",path:c="",setOpen:d,...n}=t,[o,l]=React.useState(!1),[m,h]=React.useState(!0),v=ReactRedux.useDispatch();return e.jsx(ct,{selected:o,disableGutters:!0,onClick:x=>{const{target:S}=x;if(HTMLDivElement.prototype.isPrototypeOf(S)&&S instanceof HTMLDivElement&&Object.prototype.toString.call(S)==="[object HTMLDivElement]"&&S.constructor===HTMLDivElement&&typeof S=="object"){const{children:j,childNodes:C}=S,f=j.item(0)??j[0]??C[0]??C.values().next().value??document.createElement("a");HTMLAnchorElement.prototype.isPrototypeOf(f)&&f instanceof HTMLAnchorElement&&Object.prototype.toString.call(f)==="[object HTMLAnchorElement]"&&f.constructor===HTMLAnchorElement&&typeof f=="object"&&f.click()}},...n,children:e.jsx(ts,{to:c,className:({isActive:x})=>ReactDOM.unstable_batchedUpdates(()=>(l(x),x&&m&&d?.(),h(!1),W.NavLink)),onClick:()=>{v({type:at.SET_TITLE,payload:{title:a}})},children:a})})},_s=({item:t})=>{const{children:a,id:c,path:d=""}=t,[n,o]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsxs(ct,{onClick:o.bind(null,!n),className:classNames(W.CollapseClick,{[W.CollapseClickActive??""]:n}),children:[e.jsx(Et,{primary:c}),e.jsx(fe,{className:classNames({[W.ArrowDownIcon??""]:n})})]}),e.jsx(Ze,{in:n,children:e.jsx("ul",{children:a?.map((l,m)=>e.jsx("li",{children:e.jsx(it,{text:l.id??"",path:mt(d,l.path??""),setOpen:o.bind(null,!0)})},m))})})]})};function ve(){const t=ReactRedux.useDispatch(),{data:a,loading:c}=nt(()=>axios.get("assets/config.json").then(n=>{const{data:o}=n;return t({type:je.SET,payload:{config:o}}),o}).catch(console.error),ft);if(c||!a)return e.jsx(Xe,{open:!0,children:e.jsx(ye,{})});const d=a.map(n=>({id:n.path,path:n.path,children:n.children.map(o=>({path:o,id:o}))}));return e.jsx(React.StrictMode,{children:e.jsx(Ye,{injectFirst:!0,children:[...gn,...d].map((n,o)=>{const{children:l,id:m="",path:h=""}=n;return e.jsxs(React.StrictMode,{children:[e.jsx(bt,{children:l?e.jsx(_s,{item:n}):e.jsx(it,{text:m,path:mt(h),className:W.overview??""})},o),e.jsx(Tt,{})]})})})})}const $s="_Paper_p9qzm_1",Cs={Paper:$s},{queueMicrotask:Ls,setTimeout:ks,Promise:ze,requestIdleCallback:Ds,requestAnimationFrame:Ns,console:We,MessageChannel:ws}=window??self??globalThis??global??void 0,re=(t=()=>{})=>{const a=(c=()=>{})=>Ds?.(()=>ks?.(()=>Ns?.(()=>Ls?.(()=>ze?.resolve?.()?.then?.(()=>{const{port1:d,port2:n}=new ws;n.onmessage=()=>c?.(),d?.postMessage?.(null)}).catch?.(We?.error)))));return new ze(c=>a?.(c))?.then?.(()=>a?.(t)).catch?.(We?.error)},{addEventListener:Ps,queueMicrotask:Os,setTimeout:Ms,Promise:Ke,requestIdleCallback:As,requestAnimationFrame:Is,console:Ve,MessageChannel:Bs}=window??self??globalThis??global??void 0,Fs=(t=()=>{})=>{const a=(c=()=>{})=>As?.(()=>Ms?.(()=>Is?.(()=>Os?.(()=>Ke?.resolve?.()?.then?.(()=>{const{port1:d,port2:n}=new Bs;n.onmessage=()=>c?.(),d?.postMessage?.(null)}).catch?.(Ve?.error)))));return Ps("load",()=>new Ke(c=>a?.(c))?.then?.(()=>a?.(t)).catch?.(Ve?.error))},Ge={elevation:24,className:Cs.Paper??""},le="WebSQL",{addEventListener:Bn,document:qs,navigator:Fn,Object:qn,console:Un}=window??self??globalThis??global??void 0;Fs(()=>qs.title=le);function Us(){return e.jsxs(React.StrictMode,{children:[e.jsx(A,{...Ge,children:le}),e.jsx(A,{...Ge,children:e.jsx(ve,{})})]})}const Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Us,documentTitle:le},Symbol.toStringTag,{value:"Module"})),Hs="_Paper_1ieip_2",zs="_Input_1ieip_22",Ws="_sqlInput_1ieip_41",Ks="_AccordionDetails_1ieip_48",Vs="_last_1ieip_57",Gs="_fullWidth_1ieip_65",Js="_aLink_1ieip_71",Xs="_Skeleton_1ieip_79",Ys="_dialog_1ieip_84",D={Paper:Hs,Input:zs,sqlInput:Ws,AccordionDetails:Ks,last:Vs,fullWidth:Gs,aLink:Js,Skeleton:Xs,dialog:Ys};var w=(t=>(t.SnackbarAlert="SnackbarAlert",t.OPENTRUE="OPENTRUE",t.OPENFALSE="OPENFALSE",t))(w||{}),T=(t=>(t.alertText="alertText",t.open="open",t.severity="severity",t))(T||{}),I=(t=>(t.error="error",t.info="info",t.success="success",t.warning="warning",t))(I||{});const Zs={alertText:"",open:!1,severity:"success"},en=(t=Zs,a)=>{const{type:c,payload:d={}}=a,n=o=>({...t,...d,open:o});switch(c){case"OPENFALSE":return n(!1);case"OPENTRUE":return n(!0);default:return t}},lt=ReactRedux.useSelector,{entries:X,values:tn,keys:xe}=Object,sn=window??global??globalThis??self??void 0,dt="table",nn="1.0",an=dt,on=2*1024*1024,Z=sn.openDatabase(dt,nn,an,on,t=>{}),rn="未选择",ut=t=>{const{i:a,...c}=t,{foreignTable:d,foreignKey:n,id:o}=a,[l,m]=as();return React.useEffect(()=>{d&&n&&Z.transaction(h=>{h.executeSql(`SELECT * FROM ${d}`,[],function(v,x){m(x.rows)})},h=>{},()=>{})},[d,n]),e.jsxs(Ot,{fullWidth:!0,children:[e.jsx(Mt,{children:a.name}),e.jsxs(At,{fullWidth:!0,...c,children:[e.jsx(he,{value:void 0,children:rn}),a.enum?a.enum?.map((h,v)=>e.jsx(he,{value:v,children:h},v)):new Array(l?.length).fill(" ").map((h,v)=>e.jsx(he,{value:l?.item(v)[o??""],children:l?.item(v)[n??""]},v))]})]})},G=0,J=t=>t!=null&&t!=="",ce=t=>!!t?.type;function cn(){const t=ReactRedux.useDispatch(),{subtitle:a,id:c}=st(),{index:d,config:n}=rt(s=>({index:s.DB[Y.index],config:s.DB[Y.config]})),{data:o,loading:l,refresh:m}=nt(()=>axios.get(`assets/${c}.json`).then(s=>s.data).catch(console.error),ft);ae(()=>{m()},[c]);const h=c??"",[v,x,S]=oe(0),[j,C,f]=oe(10),[P,L,B]=oe(0),b=Array.isArray(o)?o??[]:[],u=b.filter(s=>s.primary),y=b.reduce((s,i)=>{const r=i.foreignKey;return r&&(s[r]=i),s[i.id]=i,s},{}),$=b.map(s=>s.id),F=b.filter(s=>!!s.foreignKey).map(s=>String(s.foreignKey)),de=[...b.filter(s=>!s.foreignKey).map(s=>String(s.id)),...F],[U,O,Q]=oe(""),[ee,H]=M({}),Te=X(ee).filter(([s,i])=>J(i)&&$.includes(s)),Ee=React.useCallback(s=>b.reduce((i,r)=>(i[r.id]=r.type?!1:s,i),{}),[b]),Re=Ee(!1),[K,_e]=M(Re),gt=tn(K),[te,$e]=M(Re),Ce=d&&a===n?.[0]?.path?` INDEXED BY ${h}_Index`:"",Le=b.filter(s=>s.foreignTable).reduce((s,i)=>{const{foreignTable:r,id:p}=i;return s+`LEFT JOIN ${r} ON ${h}.${p}=${r}.${p} `}," ").trimEnd(),ke=` LIMIT ${f()} OFFSET ${f()*S()}`,ue=`SELECT * FROM ${h}${Ce}${Le}${ke};`,De=!Te.length?"":" WHERE "+Te.reduce((s,i)=>{const[r,p]=i;return J(p)?Array.isArray(p)?[...s,`(${r}>=${p[0]}) and (${r}<=${p[1]})`]:[...s,`${h}.${r} ${te[r]?`LIKE "%${String(p)}%"`:`= ${ce(y[r])?p:`"${p}"`}`} `]:s},[]).join(" and ").trimEnd(),{run:se}=ns(React.useCallback((s=U)=>{const i=s.trim().split(";");Z.transaction(r=>{for(let p of i)p&&r.executeSql(p,[],function(R,_){const{rows:g,rowsAffected:E}=_;E===0&&g?(jt({rows:g}),L(g.length)):t({type:w.OPENTRUE,payload:{[T.alertText]:`${p.split(" ")[0]}成功！`,[T.severity]:I.success}})})},r=>{Pe({severity:"error",alertText:`执行失败, 原因：${r.message}`}),t({type:w.OPENTRUE,payload:{[T.alertText]:`执行失败, 原因：${r.message}`,[T.severity]:I.error}})},()=>{Z.transaction(r=>{r.executeSql(`SELECT COUNT(*) FROM ${h}${De};`,[],function(p,R){const{rows:_}=R;L(_.item(0)["COUNT(*)"])})},r=>{},()=>{})})},[U,h]));React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{if(!o)return;O(ue),H(xe(ee).reduce((i,r)=>(i[r]=void 0,i),{}));const s={...Ee(!1),...[...xe(K),...xe(te)].reduce((i,r)=>(i[r]=!1,i),{})};_e(s),$e(s),re(()=>se(ue))}),[o]);const[yt,jt]=M({insertId:0,rowsAffected:0,rows:{length:0,item:()=>{}}});ae(()=>{const s=gt.every(i=>!i)?"*":X(K).reduce((i,r)=>r[1]?[...i,r[0]]:i,[]).join(", ");O(`SELECT ${s} FROM ${h}${Ce}${Le}${De}${ke};`)},[ee,te,K,v,j,d]),ae(()=>{re(()=>se(Q()))},[v,j]);const k=yt?.rows,Ne=React.useMemo(()=>k.length?Object.keys(k.item(0)??{}).filter(s=>de.includes(s)):[],[k]),[we,Pe]=M({severity:"info",alertText:"待操作"}),{open:vt}=lt(s=>({open:s.SnackBar.open}));ae(()=>ReactDOM.unstable_batchedUpdates(()=>{re(()=>{const s={severity:"success",alertText:`执行成功, 查到 ${B()??k?.length} 条记录`};Pe(s),vt||t({type:w.OPENTRUE,payload:s})})}),[k]);const[Oe,ne]=M({open:!1,type:"UD",dialogData:k.length?k.item(0):{}}),{dialogData:St}=Oe,Me=s=>u.map(i=>{const{id:r}=i;return`${r}=${s[r]}`}).join(" AND ");return l||b.length===0?e.jsx(_t,{className:D.Skeleton??"",variant:"rounded",animation:"wave"}):e.jsxs(e.Fragment,{children:[e.jsxs(A,{elevation:24,className:D.Paper??"",children:[e.jsxs(Ae,{elevation:24,children:[e.jsx(Ie,{expandIcon:e.jsx(fe,{}),children:e.jsx(Be,{children:"筛选器"})}),e.jsx(Fe,{className:D.Input??"",children:b.map((s,i)=>{const{id:r}=s;return e.jsxs(A,{elevation:24,className:classNames({[D.last??""]:s.type==="between"})??"",children:[e.jsx(qe,{onChange:(p,R)=>{_e({[r]:R})},checked:K[r]}),(()=>{switch(s.type){case"enum":return e.jsx(ut,{fullWidth:!0,label:s.name,onChange:p=>{H({[r]:p.target.value})},i:s});case"between":{const p=ee[r];return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s.name}),e.jsx($t,{min:s.min??0,max:s.max??100,step:s.step??1,value:Array.isArray(p)?p:[0,100],onChange:(R,_,g)=>{if(!Array.isArray(_))return;const[E,q]=_,{id:pe}=s;if(E!==void 0&&q!==void 0)if(q-E<G)if(g===0){const V=Math.min(E,100-G);H({[pe]:[V,V+G]})}else{const V=Math.max(q,G);H({[pe]:[V-G,V]})}else H({[pe]:_})},valueLabelDisplay:"on",disableSwap:!0})]})}default:return e.jsxs(e.Fragment,{children:[e.jsx(ie,{"aria-autocomplete":"both",label:s.name,type:s.type==="number"?"number":"search",onChange:p=>{H({[r]:p.target.value})}}),e.jsx(et,{control:e.jsx(qe,{}),label:"模糊搜索",onChange:(p,R)=>$e({[r]:R}),checked:te[r]})]})}})()]},i)})})]}),e.jsxs(Ae,{elevation:24,className:D.sqlInput??"",children:[e.jsx(Ie,{expandIcon:e.jsx(fe,{}),children:e.jsx(Be,{children:"SQL执行"})}),e.jsxs(Fe,{className:D.AccordionDetails??"",children:[e.jsx(ie,{multiline:!0,autoFocus:!0,fullWidth:!0,"aria-autocomplete":"both",label:"SQL",onChange:s=>O(s.target.value),value:U}),e.jsx(N,{size:"large",variant:"contained",onClick:s=>{x(i=>(i||se(Q()),0))},children:"Transaction"})]})]}),e.jsx(A,{elevation:24,className:D.fullWidth??"",children:e.jsx(tt,{severity:we.severity,variant:"filled",children:we.alertText})}),e.jsxs(A,{elevation:24,children:[e.jsx(Ct,{children:e.jsxs(Lt,{stickyHeader:!0,children:[e.jsx(kt,{children:e.jsx(Ue,{children:Ne.map((s,i)=>e.jsx(Qe,{align:"center",title:s,children:y[s]?.name??s},i))})}),e.jsx(Dt,{children:new Array(k.length).fill(" ").map((s,i)=>e.jsx(Ue,{hover:!0,children:Ne.map((r,p)=>{const R=y[r],_=R?.id,g=k?.item(i),E=R?.enum,q=g[r];return React.createElement(Qe,{..._&&{title:String(g[_])},key:p,align:"center",...y[r]?.primary&&{onClick:()=>{ne({open:!0,type:"UD",dialogData:g})},className:D.aLink??""}},E&&J(q)?E[Number(q)]:q)})},i))})]})}),e.jsx(Nt,{component:"div",count:P??k?.length??10,rowsPerPage:j,page:v,onPageChange:(s,i)=>{x(i)},onRowsPerPageChange:s=>ReactDOM.unstable_batchedUpdates(()=>{C(+s.target.value),x(0)}),labelDisplayedRows:s=>`${s.from}-${isNaN(s.to)?1:s.to}/共${s.count??0}项`,labelRowsPerPage:"每页行数："})]}),e.jsx(A,{elevation:24,children:e.jsx(wt,{color:"primary",size:"large",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{ne({open:!0,type:"C",dialogData:b.reduce((s,i)=>(s[i.id]="",s),{})})}),children:e.jsx(Pt,{})})})]}),e.jsx(ln,{onClose:()=>ne({open:!1}),className:D.dialog??"",...Oe,dialogDataProps:St,idToNameRecord:y,idToNameKeys:$,idToNamePrimary:u,idToName:b,comfirm:s=>ReactDOM.unstable_batchedUpdates(()=>{O(s),se(`${s};${ue}`),ne({open:!1})}),modifySQL:s=>{const i=X(s).filter(([r])=>$.includes(r)&&!y[r]?.primary).map(([r,p])=>`${r}=${J(p)?ce(y[r])?p:`'${p}'`:"null"}`).join(", ");return`UPDATE ${h} SET ${i} WHERE ${Me(s)};`},deleteSQL:s=>`DELETE FROM ${h} WHERE ${Me(s)};`,insertSQL:s=>{const i=X(s).filter(([g,E])=>J(E)&&$.includes(g)),r=u.map(g=>g.id),p=i.map(([g])=>g);if(r.some(g=>!p.includes(g)))return t({type:w.OPENTRUE,payload:{[T.alertText]:"还有必填项未填写",[T.severity]:I.warning}}),"";const R=i.map(([g])=>g).join(", "),_=i.map(([g,E])=>`${ce(y[g])?E:`'${E}'`}`).join(", ");return`INSERT INTO ${h} (${R}) VALUES (${_});`}})]})}const ln=t=>{const{type:a,dialogDataProps:c,idToNameRecord:d,idToNameKeys:n,modifySQL:o,deleteSQL:l,comfirm:m,idToNamePrimary:h,insertSQL:v,idToName:x,...S}=t,[j,C]=M(c),[f,P]=M({open:!1,text:"",code:""}),L=a==="UD";React.useEffect(()=>{C(c)},[c,open]);const B=()=>{P({open:!1})},b=(u,y)=>L?{defaultValue:u,disabled:!!y}:{required:!!y};return e.jsxs(e.Fragment,{children:[e.jsxs(ge,{...S,children:[X(j??{}).filter(([u])=>n.includes(u)).map(([u,y],$)=>{const F=d[u],be=F?.type,de=ce(F),U=F.primary;return F&&be==="enum"?e.jsx(ut,{i:F,...b(y,U),label:u,onChange:O=>{const{value:Q}=O.target;C({[u]:Q})}},$):React.createElement(ie,{"aria-autocomplete":"both",label:u,type:de?"number":"search",...b(y,U),key:$,onChange:O=>{const{value:Q}=O.target;C({[u]:Q})}})}),L?e.jsxs(e.Fragment,{children:[e.jsx(N,{size:"large",variant:"contained",onClick:()=>{P({open:!0,text:"确认修改？",code:o(j)})},children:"修改"}),e.jsx(N,{size:"large",variant:"outlined",color:"error",onClick:()=>{P({open:!0,text:"确认删除？",code:l(j)})},children:"删除"})]}):e.jsx(N,{size:"large",variant:"contained",onClick:()=>{const u=v(j);u&&P({open:!0,text:"确认新增？",code:u})},children:"新增"})]}),e.jsxs(ge,{open:f.open,onClose:B,className:D.dialog??"",children:[e.jsx("h1",{children:f.text}),e.jsx(ie,{defaultValue:f.code,onChange:u=>P({code:u.target.value}),autoFocus:!0,"aria-autocomplete":"both",label:"sql",type:"search",multiline:!0,fullWidth:!0}),e.jsx(N,{size:"large",variant:"outlined",color:"warning",onClick:()=>{m(f.code),B()},children:"确认"}),e.jsx(N,{size:"large",variant:"contained",onClick:B,children:"取消"})]})]})},pt=({...t})=>e.jsx(N,{variant:"contained",size:"large",...t}),dn=()=>window.caches?.keys()?.then(t=>t.forEach(a=>window.caches?.delete(a))).catch(console.error),un=t=>{const{open:a=!1,handleClose:c,onClick:d,title:n,content:o}=t;return e.jsxs(ge,{open:a,keepMounted:!0,onClose:c,children:[e.jsx(Wt,{children:n}),o&&e.jsx(Kt,{children:o}),e.jsxs(Vt,{className:z.DialogActions??"",children:[e.jsx(N,{variant:"outlined",onClick:c,size:"large",children:"取消"}),e.jsx(pt,{onClick:d,children:"确定"})]})]})},pn=t=>{var a=document.createElement("textarea");a.value=t,document.body.append(a),a.select(),document.execCommand("copy"),a.remove()},Je=(t,a,c)=>{let d=setTimeout(()=>{re(()=>location.reload())},5e3);fetch(`assets/${t}.sql`).then(n=>n.text()).then(n=>{const o=n.trim().split(";");Z.transaction(l=>{for(let m of o)m&&l.executeSql(m+";",[])},l=>{a({type:w.OPENTRUE,payload:{[T.alertText]:`执行失败, 原因：${l.message}`,[T.severity]:I.error}}),clearTimeout(d)},()=>{a({type:w.OPENTRUE,payload:{[T.alertText]:c,[T.severity]:I.success}})})})};function hn(t){os(()=>{fetch("assets/TRIGGER.sql").then(u=>u.text()).then(pn).catch(console.error)});const a=ys(u=>u.AppBarTitle[ot.title]),[c,d]=React.useState(null),[n,o]=React.useState(!1),l=()=>{o(!1)},m=!!c,{setMenuToggle:h,...v}=t,x=React.useContext(Se),[S,j]=React.useState(!1),{subtitle:C,id:f}=st(),P=ReactRedux.useDispatch(),L=ReactRedux.useDispatch(),{index:B,config:b}=rt(u=>({index:u.DB[Y.index],config:u.DB[Y.config]}));return e.jsxs(React.StrictMode,{children:[e.jsxs(It,{position:"sticky",className:z.AppBar??"",...v,children:[e.jsx(Bt,{onClick:x?h:j.bind(null,!0),className:z.menuIcon??"",size:"large",children:e.jsx(Ft,{})}),e.jsx("span",{onClick:()=>{const y=prompt("运行单条SQL代码")?.trim();y&&Z.transaction($=>{$.executeSql(y,[])},$=>{L({type:w.OPENTRUE,payload:{[T.alertText]:`执行失败, 原因：${$.message}`,[T.severity]:I.error}})},()=>{L({type:w.OPENTRUE,payload:{[T.alertText]:`${y}
执行成功`,[T.severity]:I.success}})})},children:(a||f)??le}),e.jsxs(N,{className:classNames(z.Avatar,{[z.open??""]:m}),onClick:u=>{d(u.currentTarget)},children:[e.jsx(qt,{}),e.jsx("span",{children:"HJX, HJX"}),e.jsx(Ut,{})]})]}),e.jsxs(Qt,{anchorEl:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:m,onClose:()=>{d(null)},className:z.Popover??"",children:[C===b?.[0]?.path&&e.jsx(et,{control:e.jsx(Ht,{}),label:"索引",onChange:(u,y)=>{P({type:je.SET,payload:{index:y}})},checked:B??!1}),f&&e.jsxs(pt,{fullWidth:!0,onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{d(null),o(!0)}),children:["重置",f,"表"]}),e.jsx(N,{fullWidth:!0,onClick:()=>{confirm("确定要删库跑路吗？")&&b?.map(u=>u.children).flat().forEach(u=>{Je(u,L,`删${u}库跑路成功! 5秒后自动刷新`)}),l()},color:"error",variant:"outlined",children:"删库跑路"})]}),e.jsx(un,{open:n,handleClose:l,title:`确定要重置${f}表吗？`,onClick:()=>{dn(),localStorage.clear(),Je(f??"",L,`重置${f}表成功! 5秒后自动刷新`),l()}}),e.jsx(zt,{anchor:"left",open:!x&&S,onClose:j.bind(null,!1),children:e.jsx(ve,{})})]})}const mn="_MainFrame_jou1o_1",xn={MainFrame:mn};function fn(){const[t,{toggle:a}]=rs(!0),c=React.useContext(Se);return e.jsxs(React.StrictMode,{children:[e.jsx(hn,{setMenuToggle:a}),e.jsxs("div",{className:xn.MainFrame,style:{"--gap":t?"9q":0},children:[e.jsx(Ze,{in:t&&c,orientation:"horizontal",children:e.jsx(A,{elevation:24,children:e.jsx(ve,{})})}),e.jsx("div",{children:e.jsx(Zt,{})})]})]})}const ht=React.lazy(()=>ls(()=>Promise.resolve().then(()=>Qs),void 0,import.meta.url)),gn=[{path:"",id:"目录",element:e.jsx(React.Suspense,{fallback:e.jsx(ye,{}),children:e.jsx(ht,{})})}],mt=(...t)=>`/${t.join("/")}`;function yn(){return e.jsx(es,{children:e.jsxs(me,{element:e.jsx(fn,{}),children:[e.jsx(me,{index:!0,element:e.jsx(React.Suspense,{fallback:e.jsx(Xe,{open:!0,children:e.jsx(ye,{})}),children:e.jsx(ht,{})})}),e.jsx(me,{path:":subtitle/:id",element:e.jsx(cn,{})})]})})}const jn=Redux.combineReducers({SnackBar:en,AppBarTitle:gs,DB:Rs}),xt=Redux.legacy_createStore(jn,Redux.applyMiddleware(ReduxThunk));xt.subscribe(()=>{});const vn="_Snackbar_1t4e7_1",Sn={Snackbar:vn};function bn(){const{open:t,alertText:a,severity:c}=lt(o=>({open:o.SnackBar.open,alertText:o.SnackBar.alertText,severity:o.SnackBar.severity})),d=ReactRedux.useDispatch(),n=(o,l)=>{l!=="clickaway"&&d({type:w.OPENFALSE})};return e.jsx(React.StrictMode,{children:e.jsx(Gt,{open:!!(t&&a),autoHideDuration:6e3,onClose:n,message:a,className:Sn.Snackbar??"",children:e.jsx(tt,{onClose:n,severity:c,variant:"filled",children:a})})})}const ft={loadingDelay:300,throttleWait:300},Se=React.createContext(!1),Tn=()=>{const t=Jt("(orientation:landscape)");return e.jsx(React.StrictMode,{children:e.jsx(Ye,{injectFirst:!0,children:e.jsxs(Xt,{children:[e.jsx(Yt,{}),e.jsx(ReactRedux.Provider,{store:xt,children:e.jsxs(Se.Provider,{value:t,children:[e.jsx(ss,{children:e.jsx(yn,{})}),e.jsx(bn,{})]})})]})})})};ReactDOM.render(e.jsx(React.StrictMode,{children:e.jsx(Tn,{})}),document.body);
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
