import{j as e}from"./react-ejZHSj7z.js";import{B as We,C as xe,S as Ke,L as gt,D as yt,a as jt,d as me,b as Ve,c as vt,P as B,e as St,A as we,f as Pe,T as Oe,g as Ae,h as Me,i as re,F as Je,j as Tt,k as w,l as Xe,m as Et,n as bt,o as Rt,p as Ie,q as Be,r as _t,s as $t,t as Ct,u as Lt,v as kt,I as Dt,w as Nt,M as ue,x as fe,y as wt,z as Pt,E as Ot,G as At,H as Mt,J as It,K as Bt,N as Ft,O as qt,Q as Ut,R as Qt,U as Ht,V as zt,W as Wt,X as Kt}from"./@mui-_A7eRbnw.js";import{d as Ge,O as Vt,e as Jt,f as pe}from"./react-router-y82kxMFL.js";import{N as Xt,H as Gt}from"./react-router-dom-v3GnXs1D.js";import{u as Ye,a as ne,b as ae,c as I,d as Yt,e as Zt,f as es}from"./ahooks-wtiDwazf.js";import"./object-assign-4_VUvG2Z.js";import"./@emotion-tNa4IMmz.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./@babel-moqvDIRK.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@remix-run-Tfa50bkj.js";import"./tslib-g6pQwBLH.js";import"./lodash-liWoq_f8.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function c(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=c(n);fetch(n.href,a)}})();const ts="modulepreload",ss=function(s,o){return new URL(s,o).href},Fe={},ns=function(o,c,l){let n=Promise.resolve();if(c&&c.length>0){const a=document.getElementsByTagName("link");n=Promise.all(c.map(d=>{if(d=ss(d,l),d in Fe)return;Fe[d]=!0;const y=d.endsWith(".css"),h=y?'[rel="stylesheet"]':"";if(!!l)for(let S=a.length-1;S>=0;S--){const j=a[S];if(j.href===d&&(!y||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=y?"stylesheet":ts,y||(f.as="script",f.crossOrigin=""),f.href=d,document.head.appendChild(f),y)return new Promise((S,j)=>{f.addEventListener("load",S),f.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${d}`)))})}))}return n.then(()=>o()).catch(a=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a})},as="_AppBar_5ly3u_1",os="_menuIcon_5ly3u_11",rs="_Avatar_5ly3u_19",cs="_open_5ly3u_27",is="_Popover_5ly3u_39",ls="_DialogActions_5ly3u_57",z={AppBar:as,menuIcon:os,Avatar:rs,open:cs,Popover:is,DialogActions:ls};var Ze=(s=>(s.SET_TITLE="SET_TITLE",s))(Ze||{}),et=(s=>(s.title="title",s))(et||{});const ds={title:""},us=(s=ds,o)=>{const{type:c,payload:l={}}=o;switch(c){case"SET_TITLE":return{...s,...l};default:return s}},ps=ReactRedux.useSelector,hs="_NavLink_1kxee_1",ms="_CollapseClick_1kxee_8",fs="_ArrowDownIcon_1kxee_11",xs="_overview_1kxee_15",gs="_ListItemButton_1kxee_20",W={NavLink:hs,CollapseClick:ms,ArrowDownIcon:fs,overview:xs,ListItemButton:gs};var ge=(s=>(s.SET="SET",s))(ge||{}),G=(s=>(s.config="config",s.index="index",s))(G||{});const ys={config:[],index:!1},js=(s=ys,o)=>{const{type:c,payload:l={}}=o;switch(c){case"SET":return{...s,...l};default:return s}},tt=ReactRedux.useSelector,st=({className:s,...o})=>e.jsx(vt,{className:classNames(s,W.ListItemButton),...o}),nt=s=>{const{text:o="",path:c="",setOpen:l,...n}=s,[a,d]=React.useState(!1),[y,h]=React.useState(!0),v=ReactRedux.useDispatch();return e.jsx(st,{selected:a,disableGutters:!0,onClick:f=>{const{target:S}=f;if(HTMLDivElement.prototype.isPrototypeOf(S)&&S instanceof HTMLDivElement&&Object.prototype.toString.call(S)==="[object HTMLDivElement]"&&S.constructor===HTMLDivElement&&typeof S=="object"){const{children:j,childNodes:C}=S,g=j.item(0)??j[0]??C[0]??C.values().next().value??document.createElement("a");HTMLAnchorElement.prototype.isPrototypeOf(g)&&g instanceof HTMLAnchorElement&&Object.prototype.toString.call(g)==="[object HTMLAnchorElement]"&&g.constructor===HTMLAnchorElement&&typeof g=="object"&&g.click()}},...n,children:e.jsx(Xt,{to:c,className:({isActive:f})=>ReactDOM.unstable_batchedUpdates(()=>(d(f),f&&y&&l?.(),h(!1),W.NavLink)),onClick:()=>{v({type:Ze.SET_TITLE,payload:{title:o}})},children:o})})},vs=({item:s})=>{const{children:o,id:c,path:l=""}=s,[n,a]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsxs(st,{onClick:a.bind(null,!n),className:classNames(W.CollapseClick,{[W.CollapseClickActive??""]:n}),children:[e.jsx(jt,{primary:c}),e.jsx(me,{className:classNames({[W.ArrowDownIcon??""]:n})})]}),e.jsx(Ve,{in:n,children:e.jsx("ul",{children:o?.map((d,y)=>e.jsx("li",{children:e.jsx(nt,{text:d.id??"",path:lt(l,d.path??""),setOpen:a.bind(null,!0)})},y))})})]})};function ye(){const s=ReactRedux.useDispatch(),{data:o,loading:c}=Ye(()=>axios.get("assets/config.json").then(n=>{const{data:a}=n;return s({type:ge.SET,payload:{config:a}}),a}).catch(console.error),ut);if(c||!o)return e.jsx(We,{open:!0,children:e.jsx(xe,{})});const l=o.map(n=>({id:n.path,path:n.path,children:n.children.map(a=>({path:a,id:a}))}));return e.jsx(React.StrictMode,{children:e.jsx(Ke,{injectFirst:!0,children:[...un,...l].map((n,a)=>{const{children:d,id:y="",path:h=""}=n;return e.jsxs(React.StrictMode,{children:[e.jsx(gt,{children:d?e.jsx(vs,{item:n}):e.jsx(nt,{text:y,path:lt(h),className:W.overview??""})},a),e.jsx(yt,{})]})})})})}const Ss="_Paper_p9qzm_1",Ts={Paper:Ss},{queueMicrotask:Es,setTimeout:bs,Promise:qe,requestIdleCallback:Rs,requestAnimationFrame:_s,console:Ue,MessageChannel:$s}=window??self??globalThis??global??void 0,he=(s=()=>{})=>{const o=(c=()=>{})=>Rs?.(()=>bs?.(()=>_s?.(()=>Es?.(()=>qe?.resolve?.()?.then?.(()=>{const{port1:l,port2:n}=new $s;n.onmessage=()=>c?.(),l?.postMessage?.(null)}).catch?.(Ue?.error)))));return new qe(c=>o?.(c))?.then?.(()=>o?.(s)).catch?.(Ue?.error)},{addEventListener:Cs,queueMicrotask:Ls,setTimeout:ks,Promise:Qe,requestIdleCallback:Ds,requestAnimationFrame:Ns,console:He,MessageChannel:ws}=window??self??globalThis??global??void 0,Ps=(s=()=>{})=>{const o=(c=()=>{})=>Ds?.(()=>ks?.(()=>Ns?.(()=>Ls?.(()=>Qe?.resolve?.()?.then?.(()=>{const{port1:l,port2:n}=new ws;n.onmessage=()=>c?.(),l?.postMessage?.(null)}).catch?.(He?.error)))));return Cs("load",()=>new Qe(c=>o?.(c))?.then?.(()=>o?.(s)).catch?.(He?.error))},ze={elevation:24,className:Ts.Paper??""},ce="WebSQL",{addEventListener:wn,document:Os,navigator:Pn,Object:On,console:An}=window??self??globalThis??global??void 0;Ps(()=>Os.title=ce);function As(){return e.jsxs(React.StrictMode,{children:[e.jsx(B,{...ze,children:ce}),e.jsx(B,{...ze,children:e.jsx(ye,{})})]})}const Ms=Object.freeze(Object.defineProperty({__proto__:null,default:As,documentTitle:ce},Symbol.toStringTag,{value:"Module"})),Is="_Paper_1ieip_2",Bs="_Input_1ieip_22",Fs="_sqlInput_1ieip_41",qs="_AccordionDetails_1ieip_48",Us="_last_1ieip_57",Qs="_fullWidth_1ieip_65",Hs="_aLink_1ieip_71",zs="_Skeleton_1ieip_79",Ws="_dialog_1ieip_84",N={Paper:Is,Input:Bs,sqlInput:Fs,AccordionDetails:qs,last:Us,fullWidth:Qs,aLink:Hs,Skeleton:zs,dialog:Ws};var P=(s=>(s.SnackbarAlert="SnackbarAlert",s.OPENTRUE="OPENTRUE",s.OPENFALSE="OPENFALSE",s))(P||{}),E=(s=>(s.alertText="alertText",s.open="open",s.severity="severity",s))(E||{}),F=(s=>(s.error="error",s.info="info",s.success="success",s.warning="warning",s))(F||{});const Ks={alertText:"",open:!1,severity:"success"},Vs=(s=Ks,o)=>{const{type:c,payload:l={}}=o,n=a=>({...s,...l,open:a});switch(c){case"OPENFALSE":return n(!1);case"OPENTRUE":return n(!0);default:return s}},at=ReactRedux.useSelector,{entries:X,values:Js,keys:Xs}=Object,Gs=window??global??globalThis??self??void 0,ot="table",Ys="1.0",Zs=ot,en=2*1024*1024,Y=Gs.openDatabase(ot,Ys,Zs,en,s=>{}),tn="未选择",rt=s=>{const{i:o,...c}=s,{foreignTable:l,foreignKey:n,id:a}=o,[d,y]=Zt();return React.useEffect(()=>{l&&n&&Y.transaction(h=>{h.executeSql(`SELECT * FROM ${l}`,[],function(v,f){y(f.rows)})},h=>{},()=>{})},[l,n]),e.jsxs(kt,{fullWidth:!0,children:[e.jsx(Dt,{children:o.name}),e.jsxs(Nt,{fullWidth:!0,...c,children:[e.jsx(ue,{value:void 0,children:tn}),o.enum?o.enum?.map((h,v)=>e.jsx(ue,{value:v,children:h},v)):new Array(d?.length).fill(" ").map((h,v)=>e.jsx(ue,{value:d?.item(v)[a??""],children:d?.item(v)[n??""]},v))]})]})},V=0,J=s=>s!=null&&s!=="",oe=s=>!!s?.type;function sn(){const s=ReactRedux.useDispatch(),{subtitle:o,id:c}=Ge(),{index:l,config:n}=tt(t=>({index:t.DB[G.index],config:t.DB[G.config]})),{data:a,loading:d,refresh:y}=Ye(()=>axios.get(`assets/${c}.json`).then(t=>t.data).catch(console.error),ut);ne(()=>{y()},[c]);const h=c??"",[v,f,S]=ae(0),[j,C,g]=ae(10),[O,L,q]=ae(0),T=Array.isArray(a)?a??[]:[],u=T.filter(t=>t.primary),x=T.reduce((t,i)=>{const r=i.foreignKey;return r&&(t[r]=i),t[i.id]=i,t},{}),R=T.map(t=>t.id),b=T.filter(t=>!!t.foreignKey).map(t=>String(t.foreignKey)),ie=[...T.filter(t=>!t.foreignKey).map(t=>String(t.id)),...b],[U,M,Q]=ae(""),[Z,H]=I({}),ve=X(Z).filter(([t,i])=>J(i)&&R.includes(t)),ee=t=>T.reduce((i,r)=>(i[r.id]=r.type?!1:t,i),{}),[le,Se]=I(ee(!1)),pt=Js(le),[Te,Ee]=I(ee(!1)),be=l&&o===n?.[0]?.path?` INDEXED BY ${h}_Index`:"",Re=T.filter(t=>t.foreignTable).reduce((t,i)=>{const{foreignTable:r,id:p}=i;return t+`LEFT JOIN ${r} ON ${h}.${p}=${r}.${p} `}," ").trimEnd(),_e=` LIMIT ${g()} OFFSET ${g()*S()}`,de=`SELECT * FROM ${h}${be}${Re}${_e};`,$e=!ve.length?"":" WHERE "+ve.reduce((t,i)=>{const[r,p]=i;return J(p)?Array.isArray(p)?[...t,`(${r}>=${p[0]}) and (${r}<=${p[1]})`]:[...t,`${h}.${r} ${Te[r]?`LIKE "%${String(p)}%"`:`= ${oe(x[r])?p:`"${p}"`}`} `]:t},[]).join(" and ").trimEnd(),{run:te}=Yt(React.useCallback((t=U)=>{const i=t.trim().split(";");Y.transaction(r=>{for(let p of i)p&&r.executeSql(p,[],function($,D){const{rows:m,rowsAffected:_}=D;_===0&&m?(mt({rows:m}),L(m.length)):s({type:P.OPENTRUE,payload:{[E.alertText]:`${p.split(" ")[0]}成功！`,[E.severity]:F.success}})})},r=>{ke({severity:"error",alertText:`执行失败, 原因：${r.message}`}),s({type:P.OPENTRUE,payload:{[E.alertText]:`执行失败, 原因：${r.message}`,[E.severity]:F.error}})},()=>{Y.transaction(r=>{r.executeSql(`SELECT COUNT(*) FROM ${h}${$e};`,[],function(p,$){const{rows:D}=$;L(D.item(0)["COUNT(*)"])})},r=>{},()=>{})})},[U,h]));React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{a&&(M(de),H(Xs(Z).reduce((t,i)=>(t[i]=void 0,t),{})),Se(ee(!1)),Ee(ee(!1)),he(()=>te(de)))}),[a]);const[ht,mt]=I({insertId:0,rowsAffected:0,rows:{length:0,item:()=>{}}});ne(()=>{const t=pt.every(i=>!i)?"*":X(le).reduce((i,r)=>r[1]?[...i,r[0]]:i,[]).join(", ");M(`SELECT ${t} FROM ${h}${be}${Re}${$e}${_e};`)},[Z,Te,le,v,j,l]),ne(()=>{he(()=>te(Q()))},[v,j]);const k=ht?.rows,Ce=React.useMemo(()=>k.length?Object.keys(k.item(0)??{}).filter(t=>ie.includes(t)):[],[k]),[Le,ke]=I({severity:"info",alertText:"待操作"}),{open:ft}=at(t=>({open:t.SnackBar.open}));ne(()=>ReactDOM.unstable_batchedUpdates(()=>{he(()=>{const t={severity:"success",alertText:`执行成功, 查到 ${q()??k?.length} 条记录`};ke(t),ft||s({type:P.OPENTRUE,payload:t})})}),[k]);const[De,se]=I({open:!1,type:"UD",dialogData:k.length?k.item(0):{}}),{dialogData:xt}=De,Ne=t=>u.map(i=>{const{id:r}=i;return`${r}=${t[r]}`}).join(" AND ");return d||T.length===0?e.jsx(St,{className:N.Skeleton??"",variant:"rounded",animation:"wave"}):e.jsxs(e.Fragment,{children:[e.jsxs(B,{elevation:24,className:N.Paper??"",children:[e.jsxs(we,{elevation:24,children:[e.jsx(Pe,{expandIcon:e.jsx(me,{}),children:e.jsx(Oe,{children:"筛选器"})}),e.jsx(Ae,{className:N.Input??"",children:T.map((t,i)=>e.jsxs(B,{elevation:24,className:classNames({[N.last??""]:t.type==="between"})??"",children:[e.jsx(Me,{onChange:(r,p)=>{Se({[t.id]:p})}}),(()=>{switch(t.type){case"enum":return e.jsx(rt,{fullWidth:!0,label:t.name,onChange:r=>{H({[t.id]:r.target.value})},i:t});case"between":{const r=Z[t.id];return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:t.name}),e.jsx(Tt,{min:t.min??0,max:t.max??100,step:t.step??1,value:Array.isArray(r)?r:[0,100],onChange:(p,$,D)=>{if(!Array.isArray($))return;const[m,_]=$;if(m!==void 0&&_!==void 0)if(_-m<V)if(D===0){const A=Math.min(m,100-V);H({[t.id]:[A,A+V]})}else{const A=Math.max(_,V);H({[t.id]:[A-V,A]})}else H({[t.id]:$})},valueLabelDisplay:"on",disableSwap:!0})]})}default:return e.jsxs(e.Fragment,{children:[e.jsx(re,{"aria-autocomplete":"both",label:t.name,type:t.type==="number"?"number":"search",onChange:r=>{H({[t.id]:r.target.value})}}),e.jsx(Je,{control:e.jsx(Me,{}),label:"模糊搜索",onChange:(r,p)=>Ee({[t.id]:p})})]})}})()]},i))})]}),e.jsxs(we,{elevation:24,className:N.sqlInput??"",children:[e.jsx(Pe,{expandIcon:e.jsx(me,{}),children:e.jsx(Oe,{children:"SQL执行"})}),e.jsxs(Ae,{className:N.AccordionDetails??"",children:[e.jsx(re,{multiline:!0,autoFocus:!0,fullWidth:!0,"aria-autocomplete":"both",label:"SQL",onChange:t=>M(t.target.value),value:U}),e.jsx(w,{size:"large",variant:"contained",onClick:t=>{f(i=>(i||te(Q()),0))},children:"Transaction"})]})]}),e.jsx(B,{elevation:24,className:N.fullWidth??"",children:e.jsx(Xe,{severity:Le.severity,variant:"filled",children:Le.alertText})}),e.jsxs(B,{elevation:24,children:[e.jsx(Et,{children:e.jsxs(bt,{stickyHeader:!0,children:[e.jsx(Rt,{children:e.jsx(Ie,{children:Ce.map((t,i)=>e.jsx(Be,{align:"center",title:t,children:x[t]?.name??t},i))})}),e.jsx(_t,{children:new Array(k.length).fill(" ").map((t,i)=>e.jsx(Ie,{hover:!0,children:Ce.map((r,p)=>{const $=x[r],D=$?.id,m=k?.item(i),_=$?.enum,A=m[r];return React.createElement(Be,{...D&&{title:String(m[D])},key:p,align:"center",...x[r]?.primary&&{onClick:()=>{se({open:!0,type:"UD",dialogData:m})},className:N.aLink??""}},_&&J(A)?_[Number(A)]:A)})},i))})]})}),e.jsx($t,{component:"div",count:O??k?.length??10,rowsPerPage:j,page:v,onPageChange:(t,i)=>{f(i)},onRowsPerPageChange:t=>ReactDOM.unstable_batchedUpdates(()=>{C(+t.target.value),f(0)}),labelDisplayedRows:t=>`${t.from}-${isNaN(t.to)?1:t.to}/共${t.count??0}项`,labelRowsPerPage:"每页行数："})]}),e.jsx(B,{elevation:24,children:e.jsx(Ct,{color:"primary",size:"large",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{se({open:!0,type:"C",dialogData:T.reduce((t,i)=>(t[i.id]="",t),{})})}),children:e.jsx(Lt,{})})})]}),e.jsx(nn,{onClose:()=>se({open:!1}),className:N.dialog??"",...De,dialogDataProps:xt,idToNameRecord:x,idToNameKeys:R,idToNamePrimary:u,idToName:T,comfirm:t=>ReactDOM.unstable_batchedUpdates(()=>{M(t),te(`${t};${de}`),se({open:!1})}),modifySQL:t=>{const i=X(t).filter(([r])=>R.includes(r)&&!x[r]?.primary).map(([r,p])=>`${r}=${J(p)?oe(x[r])?p:`'${p}'`:"null"}`).join(", ");return`UPDATE ${h} SET ${i} WHERE ${Ne(t)};`},deleteSQL:t=>`DELETE FROM ${h} WHERE ${Ne(t)};`,insertSQL:t=>{const i=X(t).filter(([m,_])=>J(_)&&R.includes(m)),r=u.map(m=>m.id),p=i.map(([m])=>m);if(r.some(m=>!p.includes(m)))return s({type:P.OPENTRUE,payload:{[E.alertText]:"还有必填项未填写",[E.severity]:F.warning}}),"";const $=i.map(([m])=>m).join(", "),D=i.map(([m,_])=>`${oe(x[m])?_:`'${_}'`}`).join(", ");return`INSERT INTO ${h} (${$}) VALUES (${D});`}})]})}const nn=s=>{const{type:o,dialogDataProps:c,idToNameRecord:l,idToNameKeys:n,modifySQL:a,deleteSQL:d,comfirm:y,idToNamePrimary:h,insertSQL:v,idToName:f,...S}=s,[j,C]=I(c),[g,O]=I({open:!1,text:"",code:""}),L=o==="UD";React.useEffect(()=>{C(c)},[c,open]);const q=()=>{O({open:!1})},T=(u,x)=>L?{defaultValue:u,disabled:!!x}:{required:!!x};return e.jsxs(e.Fragment,{children:[e.jsxs(fe,{...S,children:[X(j??{}).filter(([u])=>n.includes(u)).map(([u,x],R)=>{const b=l[u],K=b?.type,ie=oe(b),U=b.primary;return b&&K==="enum"?e.jsx(rt,{i:b,...T(x,U),label:u,onChange:M=>{const{value:Q}=M.target;C({[u]:Q})}},R):React.createElement(re,{"aria-autocomplete":"both",label:u,type:ie?"number":"search",...T(x,U),key:R,onChange:M=>{const{value:Q}=M.target;C({[u]:Q})}})}),L?e.jsxs(e.Fragment,{children:[e.jsx(w,{size:"large",variant:"contained",onClick:()=>{O({open:!0,text:"确认修改？",code:a(j)})},children:"修改"}),e.jsx(w,{size:"large",variant:"outlined",color:"error",onClick:()=>{O({open:!0,text:"确认删除？",code:d(j)})},children:"删除"})]}):e.jsx(w,{size:"large",variant:"contained",onClick:()=>{const u=v(j);u&&O({open:!0,text:"确认新增？",code:u})},children:"新增"})]}),e.jsxs(fe,{open:g.open,onClose:q,className:N.dialog??"",children:[e.jsx("h1",{children:g.text}),e.jsx(re,{defaultValue:g.code,onChange:u=>O({code:u.target.value}),autoFocus:!0,"aria-autocomplete":"both",label:"sql",type:"search",multiline:!0,fullWidth:!0}),e.jsx(w,{size:"large",variant:"outlined",color:"warning",onClick:()=>{y(g.code),q()},children:"确认"}),e.jsx(w,{size:"large",variant:"contained",onClick:q,children:"取消"})]})]})},ct=({...s})=>e.jsx(w,{variant:"contained",size:"large",...s}),an=()=>window.caches?.keys()?.then(s=>s.forEach(o=>window.caches?.delete(o))).catch(console.error),on=s=>{const{open:o=!1,handleClose:c,onClick:l,title:n,content:a}=s;return e.jsxs(fe,{open:o,keepMounted:!0,onClose:c,children:[e.jsx(qt,{children:n}),a&&e.jsx(Ut,{children:a}),e.jsxs(Qt,{className:z.DialogActions??"",children:[e.jsx(w,{variant:"outlined",onClick:c,size:"large",children:"取消"}),e.jsx(ct,{onClick:l,children:"确定"})]})]})};function rn(s){const o=ps(u=>u.AppBarTitle[et.title]),[c,l]=React.useState(null),[n,a]=React.useState(!1),d=()=>{a(!1)},y=!!c,{setMenuToggle:h,...v}=s,f=React.useContext(je),[S,j]=React.useState(!1),{subtitle:C,id:g}=Ge(),O=ReactRedux.useDispatch(),L=ReactRedux.useDispatch(),{index:q,config:T}=tt(u=>({index:u.DB[G.index],config:u.DB[G.config]}));return e.jsxs(React.StrictMode,{children:[e.jsxs(wt,{position:"sticky",className:z.AppBar??"",...v,children:[e.jsx(Pt,{onClick:f?h:j.bind(null,!0),className:z.menuIcon??"",size:"large",children:e.jsx(Ot,{})}),e.jsx("span",{children:(o||g)??ce}),e.jsxs(w,{className:classNames(z.Avatar,{[z.open??""]:y}),onClick:u=>{l(u.currentTarget)},children:[e.jsx(At,{}),e.jsx("span",{children:"HJX, HJX"}),e.jsx(Mt,{})]})]}),e.jsxs(It,{anchorEl:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:y,onClose:()=>{l(null)},className:z.Popover??"",children:[C===T?.[0]?.path&&e.jsx(Je,{control:e.jsx(Bt,{}),label:"索引",onChange:(u,x)=>{O({type:ge.SET,payload:{index:x}})},checked:q??!1}),g&&e.jsxs(ct,{fullWidth:!0,onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{l(null),a(!0)}),children:["重置",g,"表"]}),e.jsx(w,{fullWidth:!0,onClick:()=>{confirm("确定要删库跑路吗？")&&T?.map(u=>u.children).flat().forEach(u=>{fetch(`assets/${u}.sql`).then(x=>x.text()).then(x=>{const R=x.trim().split(";");Y.transaction(b=>{for(let K of R)K&&b.executeSql(K+";",[])},b=>{L({type:P.OPENTRUE,payload:{[E.alertText]:`执行失败, 原因：${b.message}`,[E.severity]:F.error}})},()=>{L({type:P.OPENTRUE,payload:{[E.alertText]:`删${u}库跑路成功！`,[E.severity]:F.success}})})})}),d()},color:"error",variant:"outlined",children:"删库跑路"})]}),e.jsx(on,{open:n,handleClose:d,title:`确定要重置${g}表吗？`,onClick:()=>{an(),localStorage.clear(),fetch(`assets/${g}.sql`).then(u=>u.text()).then(u=>{const x=u.trim().split(";");Y.transaction(R=>{for(let b of x)b&&R.executeSql(b+";",[])},R=>{L({type:P.OPENTRUE,payload:{[E.alertText]:`执行失败, 原因：${R.message}`,[E.severity]:F.error}})},()=>{L({type:P.OPENTRUE,payload:{[E.alertText]:`重置${g}表成功, 5秒后自动刷新`,[E.severity]:F.success}}),setTimeout(()=>{location.reload()},5e3)})}),d()}}),e.jsx(Ft,{anchor:"left",open:!f&&S,onClose:j.bind(null,!1),children:e.jsx(ye,{})})]})}const cn="_MainFrame_jou1o_1",ln={MainFrame:cn};function dn(){const[s,{toggle:o}]=es(!0),c=React.useContext(je);return e.jsxs(React.StrictMode,{children:[e.jsx(rn,{setMenuToggle:o}),e.jsxs("div",{className:ln.MainFrame,style:{"--gap":s?"9q":0},children:[e.jsx(Ve,{in:s&&c,orientation:"horizontal",children:e.jsx(B,{elevation:24,children:e.jsx(ye,{})})}),e.jsx("div",{children:e.jsx(Vt,{})})]})]})}const it=React.lazy(()=>ns(()=>Promise.resolve().then(()=>Ms),void 0,import.meta.url)),un=[{path:"",id:"目录",element:e.jsx(React.Suspense,{fallback:e.jsx(xe,{}),children:e.jsx(it,{})})}],lt=(...s)=>`/${s.join("/")}`;function pn(){return e.jsx(Jt,{children:e.jsxs(pe,{element:e.jsx(dn,{}),children:[e.jsx(pe,{index:!0,element:e.jsx(React.Suspense,{fallback:e.jsx(We,{open:!0,children:e.jsx(xe,{})}),children:e.jsx(it,{})})}),e.jsx(pe,{path:":subtitle/:id",element:e.jsx(sn,{})})]})})}const hn=Redux.combineReducers({SnackBar:Vs,AppBarTitle:us,DB:js}),dt=Redux.legacy_createStore(hn,Redux.applyMiddleware(ReduxThunk));dt.subscribe(()=>{});const mn="_Snackbar_1t4e7_1",fn={Snackbar:mn};function xn(){const{open:s,alertText:o,severity:c}=at(a=>({open:a.SnackBar.open,alertText:a.SnackBar.alertText,severity:a.SnackBar.severity})),l=ReactRedux.useDispatch(),n=(a,d)=>{d!=="clickaway"&&l({type:P.OPENFALSE})};return e.jsx(React.StrictMode,{children:e.jsx(Ht,{open:!!(s&&o),autoHideDuration:6e3,onClose:n,message:o,className:fn.Snackbar??"",children:e.jsx(Xe,{onClose:n,severity:c,variant:"filled",children:o})})})}const ut={loadingDelay:300,throttleWait:300},je=React.createContext(!1),gn=()=>{const s=zt("(orientation:landscape)");return e.jsx(React.StrictMode,{children:e.jsx(Ke,{injectFirst:!0,children:e.jsxs(Wt,{children:[e.jsx(Kt,{}),e.jsx(ReactRedux.Provider,{store:dt,children:e.jsxs(je.Provider,{value:s,children:[e.jsx(Gt,{children:e.jsx(pn,{})}),e.jsx(xn,{})]})})]})})})};ReactDOM.render(e.jsx(React.StrictMode,{children:e.jsx(gn,{})}),document.body);
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
