import{j as e}from"./react-ejZHSj7z.js";import{B as Ye,C as ve,S as Ze,L as bt,D as Et,a as _t,d as ye,b as et,c as $t,P as I,e as Ct,A as Ae,f as Ie,T as Be,g as Fe,h as qe,i as le,F as tt,j as kt,k as N,l as st,m as Lt,n as Dt,o as Nt,p as Ue,q as Qe,r as wt,s as Pt,t as Ot,u as Mt,v as At,I as It,w as Bt,M as fe,x as je,y as Ft,z as qt,E as Ut,G as Qt,H as Ht,J as zt,K as Wt,N as Gt,O as Kt,Q as Vt,R as Jt,U as Xt,V as Yt,W as Zt,X as es}from"./@mui-_A7eRbnw.js";import{d as nt,O as ts,e as ss,f as xe}from"./react-router-y82kxMFL.js";import{N as ns,H as os}from"./react-router-dom-v3GnXs1D.js";import{u as ot,a as re,b as ce,c as A,d as as,e as rs,f as cs,g as is}from"./ahooks-LOzqvy8i.js";import{c as at}from"./copy-text-to-clipboard-SBA1EQaE.js";import"./object-assign-4_VUvG2Z.js";import"./@emotion-tNa4IMmz.js";import"./hoist-non-react-statics-o0ngdJFr.js";import"./@babel-moqvDIRK.js";import"./stylis-UTZzoVRx.js";import"./clsx-2Jv0kmJG.js";import"./@remix-run-Tfa50bkj.js";import"./tslib-g6pQwBLH.js";import"./lodash-liWoq_f8.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function c(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(o){if(o.ep)return;o.ep=!0;const a=c(o);fetch(o.href,a)}})();const ls="modulepreload",ds=function(t,n){return new URL(t,n).href},He={},us=function(n,c,d){let o=Promise.resolve();if(c&&c.length>0){const a=document.getElementsByTagName("link");o=Promise.all(c.map(l=>{if(l=ds(l,d),l in He)return;He[l]=!0;const h=l.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!d)for(let S=a.length-1;S>=0;S--){const j=a[S];if(j.href===l&&(!h||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${p}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":ls,h||(x.as="script",x.crossOrigin=""),x.href=l,document.head.appendChild(x),h)return new Promise((S,j)=>{x.addEventListener("load",S),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${l}`)))})}))}return o.then(()=>n()).catch(a=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a})},ps="_AppBar_n6byb_1",hs="_menuIcon_n6byb_11",ms="_Avatar_n6byb_19",fs="_open_n6byb_27",xs="_Popover_n6byb_39",gs="_DialogActions_n6byb_57",G={AppBar:ps,menuIcon:hs,Avatar:ms,open:fs,Popover:xs,DialogActions:gs};var rt=(t=>(t.SET_TITLE="SET_TITLE",t))(rt||{}),ct=(t=>(t.title="title",t))(ct||{});const ys={title:""},js=(t=ys,n)=>{const{type:c,payload:d={}}=n;switch(c){case"SET_TITLE":return{...t,...d};default:return t}},vs=ReactRedux.useSelector,Ss="_NavLink_1kxee_1",Ts="_CollapseClick_1kxee_8",Rs="_ArrowDownIcon_1kxee_11",bs="_overview_1kxee_15",Es="_ListItemButton_1kxee_20",K={NavLink:Ss,CollapseClick:Ts,ArrowDownIcon:Rs,overview:bs,ListItemButton:Es};var de=(t=>(t.SET="SET",t))(de||{}),V=(t=>(t.config="config",t.index="index",t.TRIGGER="TRIGGER",t))(V||{});const _s={config:[],index:!1,TRIGGER:""},$s=(t=_s,n)=>{const{type:c,payload:d={}}=n;switch(c){case"SET":return{...t,...d};default:return t}},it=ReactRedux.useSelector,lt=({className:t,...n})=>e.jsx($t,{className:classNames(t,K.ListItemButton),...n}),dt=t=>{const{text:n="",path:c="",setOpen:d,...o}=t,[a,l]=React.useState(!1),[h,p]=React.useState(!0),y=ReactRedux.useDispatch();return e.jsx(lt,{selected:a,disableGutters:!0,onClick:x=>{const{target:S}=x;if(HTMLDivElement.prototype.isPrototypeOf(S)&&S instanceof HTMLDivElement&&Object.prototype.toString.call(S)==="[object HTMLDivElement]"&&S.constructor===HTMLDivElement&&typeof S=="object"){const{children:j,childNodes:k}=S,E=j.item(0)??j[0]??k[0]??k.values().next().value??document.createElement("a");HTMLAnchorElement.prototype.isPrototypeOf(E)&&E instanceof HTMLAnchorElement&&Object.prototype.toString.call(E)==="[object HTMLAnchorElement]"&&E.constructor===HTMLAnchorElement&&typeof E=="object"&&E.click()}},...o,children:e.jsx(ns,{to:c,className:({isActive:x})=>ReactDOM.unstable_batchedUpdates(()=>(l(x),x&&h&&d?.(),p(!1),K.NavLink)),onClick:()=>{y({type:rt.SET_TITLE,payload:{title:n}}),document.title=n},children:n})})},Cs=({item:t})=>{const{children:n,id:c,path:d=""}=t,[o,a]=React.useState(!1);return e.jsxs(React.StrictMode,{children:[e.jsxs(lt,{onClick:a.bind(null,!o),className:classNames(K.CollapseClick,{[K.CollapseClickActive??""]:o}),children:[e.jsx(_t,{primary:c}),e.jsx(ye,{className:classNames({[K.ArrowDownIcon??""]:o})})]}),e.jsx(et,{in:o,children:e.jsx("ul",{children:n?.map((l,h)=>e.jsx("li",{children:e.jsx(dt,{text:l.id??"",path:xt(d,l.path??""),setOpen:a.bind(null,!0)})},h))})})]})};function Se(){const t=ReactRedux.useDispatch(),{data:n,loading:c}=ot(()=>axios.get("assets/config.json").then(o=>{const{data:a}=o;return t({type:de.SET,payload:{config:a}}),a}).catch(console.error),yt);if(c||!n)return e.jsx(Ye,{open:!0,children:e.jsx(ve,{})});const d=n.map(o=>({id:o.path,path:o.path,children:o.children.map(a=>({path:a,id:a}))}));return e.jsx(React.StrictMode,{children:e.jsx(Ze,{injectFirst:!0,children:[...jn,...d].map((o,a)=>{const{children:l,id:h="",path:p=""}=o;return e.jsxs(React.StrictMode,{children:[e.jsx(bt,{children:l?e.jsx(Cs,{item:o}):e.jsx(dt,{text:h,path:xt(p),className:K.overview??""})},a),e.jsx(Et,{})]})})})})}const ks="_Paper_p9qzm_1",Ls={Paper:ks},{queueMicrotask:Ds,setTimeout:Ns,Promise:ze,requestIdleCallback:ws,requestAnimationFrame:Ps,console:We,MessageChannel:Os}=window??self??globalThis??global??void 0,te=(t=()=>{})=>{const n=(c=()=>{})=>ws?.(()=>Ns?.(()=>Ps?.(()=>Ds?.(()=>ze?.resolve?.()?.then?.(()=>{const{port1:d,port2:o}=new Os;o.onmessage=()=>c?.(),d?.postMessage?.(null)}).catch?.(We?.error)))));return new ze(c=>n?.(c))?.then?.(()=>n?.(t)).catch?.(We?.error)},{addEventListener:Ms,queueMicrotask:As,setTimeout:Is,Promise:Ge,requestIdleCallback:Bs,requestAnimationFrame:Fs,console:Ke,MessageChannel:qs}=window??self??globalThis??global??void 0,Us=(t=()=>{})=>{const n=(c=()=>{})=>Bs?.(()=>Is?.(()=>Fs?.(()=>As?.(()=>Ge?.resolve?.()?.then?.(()=>{const{port1:d,port2:o}=new qs;o.onmessage=()=>c?.(),d?.postMessage?.(null)}).catch?.(Ke?.error)))));return Ms("load",()=>new Ge(c=>n?.(c))?.then?.(()=>n?.(t)).catch?.(Ke?.error))},Ve={elevation:24,className:Ls.Paper??""},ue="WebSQL",{addEventListener:Un,document:Qs,navigator:Qn,Object:Hn,console:zn}=window??self??globalThis??global??void 0;Us(()=>Qs.title=ue);function Hs(){return e.jsxs(React.StrictMode,{children:[e.jsx(I,{...Ve,children:ue}),e.jsx(I,{...Ve,children:e.jsx(Se,{})})]})}const zs=Object.freeze(Object.defineProperty({__proto__:null,default:Hs,documentTitle:ue},Symbol.toStringTag,{value:"Module"})),Ws="_Paper_1ieip_2",Gs="_Input_1ieip_22",Ks="_sqlInput_1ieip_41",Vs="_AccordionDetails_1ieip_48",Js="_last_1ieip_57",Xs="_fullWidth_1ieip_65",Ys="_aLink_1ieip_71",Zs="_Skeleton_1ieip_79",en="_dialog_1ieip_84",D={Paper:Ws,Input:Gs,sqlInput:Ks,AccordionDetails:Vs,last:Js,fullWidth:Xs,aLink:Ys,Skeleton:Zs,dialog:en};var w=(t=>(t.SnackbarAlert="SnackbarAlert",t.OPENTRUE="OPENTRUE",t.OPENFALSE="OPENFALSE",t))(w||{}),_=(t=>(t.alertText="alertText",t.open="open",t.severity="severity",t))(_||{}),B=(t=>(t.error="error",t.info="info",t.success="success",t.warning="warning",t))(B||{});const tn={alertText:"",open:!1,severity:"success"},sn=(t=tn,n)=>{const{type:c,payload:d={}}=n,o=a=>({...t,...d,open:a});switch(c){case"OPENFALSE":return o(!1);case"OPENTRUE":return o(!0);default:return t}},ut=ReactRedux.useSelector,{entries:ee,values:nn,keys:ge}=Object,on=window??global??globalThis??self??void 0,pt="table",an="1.0",rn=pt,cn=2*1024*1024,se=on.openDatabase(pt,an,rn,cn,t=>{}),ln="未选择",ht=t=>{const{i:n,...c}=t,{foreignTable:d,foreignKey:o,id:a}=n,[l,h]=rs();return React.useEffect(()=>{d&&o&&se.transaction(p=>{p.executeSql(`SELECT * FROM ${d}`,[],function(y,x){h(x.rows)})},p=>{},()=>{})},[d,o]),e.jsxs(At,{fullWidth:!0,...c,children:[e.jsx(It,{children:n.name}),e.jsxs(Bt,{fullWidth:!0,...c,children:[e.jsx(fe,{value:void 0,children:ln}),n.enum?n.enum?.map((p,y)=>e.jsx(fe,{value:y,children:p},y)):new Array(l?.length).fill(" ").map((p,y)=>e.jsx(fe,{value:l?.item(y)[a??""],children:l?.item(y)[o??""]},y))]})]})},Y=0,Z=t=>t!=null&&t!=="",ie=t=>!!t?.type;function dn(){const t=ReactRedux.useDispatch(),{subtitle:n,id:c}=nt(),{index:d,config:o}=it(s=>({index:s.DB[V.index],config:s.DB[V.config]})),{data:a,loading:l,refresh:h}=ot(()=>axios.get(`assets/${c}.json`).then(s=>s.data).catch(console.error),yt);re(()=>{h()},[c]);const p=c??"",[y,x,S]=ce(0),[j,k,E]=ce(10),[P,O,F]=ce(0),T=Array.isArray(a)?a??[]:[],v=T.filter(s=>s.primary),m=T.reduce((s,i)=>{const r=i.foreignKey;return r&&(s[r]=i),s[i.id]=i,s},{}),f=T.map(s=>s.id),$=T.filter(s=>!!s.foreignKey).map(s=>String(s.foreignKey)),pe=[...T.filter(s=>!s.foreignKey).map(s=>String(s.id)),...$],[H,M,q]=ce(""),[z,W]=A({}),Re=ee(z).filter(([s,i])=>Z(i)&&f.includes(s)),be=React.useCallback(s=>T.reduce((i,r)=>(i[r.id]=r.type?!1:s,i),{}),[T]),Ee=be(!1),[J,_e]=A(Ee),jt=nn(J),[ne,$e]=A(Ee),Ce=d&&n===o?.[0]?.path?` INDEXED BY ${p}_Index`:"",ke=T.filter(s=>s.foreignTable).reduce((s,i)=>{const{foreignTable:r,id:u}=i;return s+`LEFT JOIN ${r} ON ${p}.${u}=${r}.${u} `}," ").trimEnd(),Le=` LIMIT ${E()} OFFSET ${E()*S()}`,he=`SELECT * FROM ${p}${Ce}${ke}${Le};`,De=!Re.length?"":" WHERE "+Re.reduce((s,i)=>{const[r,u]=i;return Z(u)?Array.isArray(u)?[...s,`(${r}>=${u[0]}) and (${r}<=${u[1]})`]:[...s,`${p}.${r} ${ne[r]?`LIKE "%${String(u)}%"`:`= ${ie(m[r])?u:`"${u}"`}`} `]:s},[]).join(" and ").trimEnd(),{run:oe}=as(React.useCallback((s=H)=>{const i=s.trim().split(";");se.transaction(r=>{for(let u of i)u&&r.executeSql(u,[],function(R,b){const{rows:g,rowsAffected:C}=b;C===0&&g?(St({rows:g}),O(g.length)):t({type:w.OPENTRUE,payload:{[_.alertText]:`${u.split(" ")[0]}成功！`,[_.severity]:B.success}})})},r=>{Pe({severity:"error",alertText:`执行失败, 原因：${r.message}`}),t({type:w.OPENTRUE,payload:{[_.alertText]:`执行失败, 原因：${r.message}`,[_.severity]:B.error}})},()=>{se.transaction(r=>{r.executeSql(`SELECT COUNT(*) FROM ${p}${De};`,[],function(u,R){const{rows:b}=R;O(b.item(0)["COUNT(*)"])})},r=>{},()=>{})})},[H,p]));React.useEffect(()=>ReactDOM.unstable_batchedUpdates(()=>{if(!a)return;M(he),W(ge(z).reduce((i,r)=>(i[r]=void 0,i),{}));const s={...be(!1),...[...ge(J),...ge(ne)].reduce((i,r)=>(i[r]=!1,i),{})};_e(s),$e(s),te(()=>oe(he))}),[a]);const[vt,St]=A({insertId:0,rowsAffected:0,rows:{length:0,item:()=>{}}});re(()=>{const s=jt.every(i=>!i)?"*":ee(J).reduce((i,r)=>{const[u,R]=r,b=m[u];return R?[...i,`${b?.foreignTable??p}.${b?.foreignKey??u}`]:i},[]).join(", ");M(`SELECT ${s} FROM ${p}${Ce}${ke}${De}${Le};`)},[z,ne,J,y,j,d]),re(()=>{te(()=>oe(q()))},[y,j]);const L=vt?.rows,Ne=React.useMemo(()=>L.length?Object.keys(L.item(0)??{}).filter(s=>pe.includes(s)):[],[L]),[we,Pe]=A({severity:"info",alertText:"待操作"}),{open:Tt}=ut(s=>({open:s.SnackBar.open}));re(()=>ReactDOM.unstable_batchedUpdates(()=>{te(()=>{const s={severity:"success",alertText:`执行成功, 查到 ${F()??L?.length} 条记录`};Pe(s),Tt||t({type:w.OPENTRUE,payload:s})})}),[L]);const[Oe,ae]=A({open:!1,type:"UD",dialogData:L.length?L.item(0):{}}),{dialogData:Rt}=Oe,Me=s=>v.map(i=>{const{id:r}=i;return`${r}=${s[r]}`}).join(" AND ");return l||T.length===0?e.jsx(Ct,{className:D.Skeleton??"",variant:"rounded",animation:"wave"}):e.jsxs(e.Fragment,{children:[e.jsxs(I,{elevation:24,className:D.Paper??"",children:[e.jsxs(Ae,{elevation:24,children:[e.jsx(Ie,{expandIcon:e.jsx(ye,{}),children:e.jsx(Be,{children:"筛选器"})}),e.jsx(Fe,{className:D.Input??"",children:T.map((s,i)=>{const{id:r}=s;return e.jsxs(I,{elevation:24,className:classNames({[D.last??""]:s.type==="between"})??"",children:[e.jsx(qe,{onChange:(u,R)=>{_e({[r]:R})},checked:J[r]}),(()=>{switch(s.type){case"enum":return e.jsx(ht,{fullWidth:!0,label:s.name,onChange:u=>{const{target:R}=u;if("value"in R){const b=R.value;W({[r]:b})}},i:s});case"between":{const u=z[r];return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s.name}),e.jsx(kt,{min:s.min??0,max:s.max??100,step:s.step??1,value:Array.isArray(u)?u:[0,100],onChange:(R,b,g)=>{if(!Array.isArray(b))return;const[C,U]=b,{id:me}=s;if(C!==void 0&&U!==void 0)if(U-C<Y)if(g===0){const X=Math.min(C,100-Y);W({[me]:[X,X+Y]})}else{const X=Math.max(U,Y);W({[me]:[X-Y,X]})}else W({[me]:b})},valueLabelDisplay:"on",disableSwap:!0})]})}default:return e.jsxs(e.Fragment,{children:[e.jsx(le,{"aria-autocomplete":"both",label:s.name,type:s.type==="number"?"number":"search",onChange:u=>{W({[r]:u.target.value})}}),e.jsx(tt,{control:e.jsx(qe,{}),label:"模糊搜索",onChange:(u,R)=>$e({[r]:R}),checked:ne[r]})]})}})()]},i)})})]}),e.jsxs(Ae,{elevation:24,className:D.sqlInput??"",children:[e.jsx(Ie,{expandIcon:e.jsx(ye,{}),children:e.jsx(Be,{children:"SQL执行"})}),e.jsxs(Fe,{className:D.AccordionDetails??"",children:[e.jsx(le,{multiline:!0,autoFocus:!0,fullWidth:!0,"aria-autocomplete":"both",label:"SQL",onChange:s=>M(s.target.value),value:H}),e.jsx(N,{size:"large",variant:"contained",onClick:s=>{x(i=>(i||oe(q()),0))},children:"Transaction"})]})]}),e.jsx(I,{elevation:24,className:D.fullWidth??"",children:e.jsx(st,{severity:we.severity,variant:"filled",children:we.alertText})}),e.jsxs(I,{elevation:24,children:[e.jsx(Lt,{children:e.jsxs(Dt,{stickyHeader:!0,children:[e.jsx(Nt,{children:e.jsx(Ue,{children:Ne.map((s,i)=>e.jsx(Qe,{align:"center",title:s,children:m[s]?.name??s},i))})}),e.jsx(wt,{children:new Array(L.length).fill(" ").map((s,i)=>e.jsx(Ue,{hover:!0,children:Ne.map((r,u)=>{const R=m[r],b=R?.id,g=L?.item(i),C=R?.enum,U=g[r];return React.createElement(Qe,{...b&&{title:String(g[b])},key:u,align:"center",...m[r]?.primary&&{onClick:()=>{ae({open:!0,type:"UD",dialogData:g})},className:D.aLink??""}},C&&Z(U)?C[Number(U)]:U)})},i))})]})}),e.jsx(Pt,{component:"div",count:P??L?.length??10,rowsPerPage:j,page:y,onPageChange:(s,i)=>{x(i)},onRowsPerPageChange:s=>ReactDOM.unstable_batchedUpdates(()=>{k(+s.target.value),x(0)}),labelDisplayedRows:s=>`${s.from}-${isNaN(s.to)?1:s.to}/共${s.count??0}项`,labelRowsPerPage:"每页行数："})]}),e.jsx(I,{elevation:24,children:e.jsx(Ot,{color:"primary",size:"large",onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{ae({open:!0,type:"C",dialogData:T.reduce((s,i)=>(s[i.id]="",s),{})})}),children:e.jsx(Mt,{})})})]}),e.jsx(un,{onClose:()=>ae({open:!1}),className:D.dialog??"",...Oe,dialogDataProps:Rt,idToNameRecord:m,idToNameKeys:f,idToNamePrimary:v,idToName:T,comfirm:s=>ReactDOM.unstable_batchedUpdates(()=>{M(s),oe(`${s};${he}`),ae({open:!1})}),modifySQL:s=>{const i=ee(s).filter(([r])=>f.includes(r)&&!m[r]?.primary).map(([r,u])=>`${r}=${Z(u)?ie(m[r])?u:`'${u}'`:"null"}`).join(", ");return`UPDATE ${p} SET ${i} WHERE ${Me(s)};`},deleteSQL:s=>`DELETE FROM ${p} WHERE ${Me(s)};`,insertSQL:s=>{const i=ee(s).filter(([g,C])=>Z(C)&&f.includes(g)),r=v.map(g=>g.id),u=i.map(([g])=>g);if(r.some(g=>!u.includes(g)))return t({type:w.OPENTRUE,payload:{[_.alertText]:"还有必填项未填写",[_.severity]:B.warning}}),"";const R=i.map(([g])=>g).join(", "),b=i.map(([g,C])=>`${ie(m[g])?C:`'${C}'`}`).join(", ");return`INSERT INTO ${p} (${R}) VALUES (${b});`}})]})}const un=t=>{const{type:n,dialogDataProps:c,idToNameRecord:d,idToNameKeys:o,modifySQL:a,deleteSQL:l,comfirm:h,idToNamePrimary:p,insertSQL:y,idToName:x,...S}=t,[j,k]=A(c),[E,P]=A({open:!1,text:"",code:""}),O=n==="UD";React.useEffect(()=>{k(c)},[c,open]);const F=()=>{P({open:!1})},T=(v,m)=>O?{defaultValue:v,disabled:!!m}:{required:!!m};return e.jsxs(e.Fragment,{children:[e.jsxs(je,{...S,children:[ee(j??{}).filter(([v])=>o.includes(v)).map(([v,m],f)=>{const $=d[v],Q=$?.type,pe=ie($),H=$.primary;return $&&Q==="enum"?e.jsx(ht,{i:$,...T(m,H),label:v,onChange:M=>{const{target:q}=M;if("value"in q){const z=q.value;k({[v]:z})}}},f):React.createElement(le,{"aria-autocomplete":"both",label:v,type:pe?"number":"search",...T(m,H),key:f,onChange:M=>{const{value:q}=M.target;k({[v]:q})}})}),O?e.jsxs(e.Fragment,{children:[e.jsx(N,{size:"large",variant:"contained",onClick:()=>{P({open:!0,text:"确认修改？",code:a(j)})},children:"修改"}),e.jsx(N,{size:"large",variant:"outlined",color:"error",onClick:()=>{P({open:!0,text:"确认删除？",code:l(j)})},children:"删除"})]}):e.jsx(N,{size:"large",variant:"contained",onClick:()=>{const v=y(j);v&&P({open:!0,text:"确认新增？",code:v})},children:"新增"})]}),e.jsxs(je,{open:E.open,onClose:F,className:D.dialog??"",children:[e.jsx("h1",{children:E.text}),e.jsx(le,{defaultValue:E.code,onChange:v=>P({code:v.target.value}),autoFocus:!0,"aria-autocomplete":"both",label:"sql",type:"search",multiline:!0,fullWidth:!0}),e.jsx(N,{size:"large",variant:"outlined",color:"warning",onClick:()=>{h(E.code),F()},children:"确认"}),e.jsx(N,{size:"large",variant:"contained",onClick:F,children:"取消"})]})]})},{error:Je}=console,mt=({...t})=>e.jsx(N,{variant:"contained",size:"large",...t}),pn=()=>window.caches?.keys()?.then(t=>t.forEach(n=>window.caches?.delete(n))).catch(console.error),hn=t=>{const{open:n=!1,handleClose:c,onClick:d,title:o,content:a}=t;return e.jsxs(je,{open:n,keepMounted:!0,onClose:c,children:[e.jsx(Kt,{children:o}),a&&e.jsx(Vt,{children:a}),e.jsxs(Jt,{className:G.DialogActions??"",children:[e.jsx(N,{variant:"outlined",onClick:c,size:"large",children:"取消"}),e.jsx(mt,{onClick:d,children:"确定"})]})]})},Xe=(t,n,c)=>{let d=setTimeout(()=>{te(()=>location.reload())},5e3);fetch(`assets/${t}.sql`).then(o=>o.text()).then(o=>{const a=o.trim().split(";");se.transaction(l=>{for(let h of a)h&&l.executeSql(h+";",[])},l=>{n({type:w.OPENTRUE,payload:{[_.alertText]:`执行失败, 原因：${l.message}`,[_.severity]:B.error}}),clearTimeout(d)},()=>{n({type:w.OPENTRUE,payload:{[_.alertText]:c,[_.severity]:B.success}})})})},mn=t=>fetch("assets/TRIGGER.sql").then(n=>n.text()).then(n=>(t({type:de.SET,payload:{TRIGGER:n}}),n??"")).then(at,Je).catch(Je);function fn(t){const n=ReactRedux.useDispatch(),c=ReactRedux.useDispatch(),{index:d,config:o,TRIGGER:a}=it(f=>({index:f.DB[V.index],config:f.DB[V.config],TRIGGER:f.DB[V.TRIGGER]})),l=React.useCallback(()=>a?(at(a),Promise.resolve()):mn(n),[a,n]);cs(()=>{te(l)});const h=vs(f=>f.AppBarTitle[ct.title]),[p,y]=React.useState(null),[x,S]=React.useState(!1),j=()=>{S(!1)},k=!!p,{setMenuToggle:E,...P}=t,O=React.useContext(Te),[F,T]=React.useState(!1),{subtitle:v,id:m}=nt();return e.jsxs(React.StrictMode,{children:[e.jsxs(Ft,{position:"sticky",className:G.AppBar??"",...P,children:[e.jsx(qt,{onClick:O?E:T.bind(null,!0),className:G.menuIcon??"",size:"large",children:e.jsx(Ut,{})}),e.jsx("span",{onClick:()=>{l().then(()=>{const $=prompt("运行单条SQL代码")?.trim();$&&se.transaction(Q=>{Q.executeSql($,[])},Q=>{c({type:w.OPENTRUE,payload:{[_.alertText]:`执行失败, 原因：${Q.message}`,[_.severity]:B.error}})},()=>{c({type:w.OPENTRUE,payload:{[_.alertText]:`${$}
执行成功`,[_.severity]:B.success}})})})},children:(h||m)??ue}),e.jsxs(N,{className:classNames(G.Avatar,{[G.open??""]:k}),onClick:f=>{y(f.currentTarget)},children:[e.jsx(Qt,{}),e.jsx("span",{children:"HJX, HJX"}),e.jsx(Ht,{})]})]}),e.jsxs(zt,{anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:k,onClose:()=>{y(null)},className:G.Popover??"",children:[v===o?.[0]?.path&&e.jsx(tt,{control:e.jsx(Wt,{}),label:"索引",onChange:(f,$)=>{n({type:de.SET,payload:{index:$}})},checked:d??!1}),m&&e.jsxs(mt,{fullWidth:!0,onClick:()=>ReactDOM.unstable_batchedUpdates(()=>{y(null),S(!0)}),children:["重置",m,"表"]}),e.jsx(N,{fullWidth:!0,onClick:()=>{confirm("确定要删库跑路吗？")&&o?.map(f=>f.children).flat().forEach(f=>{Xe(f,c,`删${f}库跑路成功! 5秒后自动刷新`)}),j()},color:"error",variant:"outlined",children:"删库跑路"})]}),e.jsx(hn,{open:x,handleClose:j,title:`确定要重置${m}表吗？`,onClick:()=>{pn(),localStorage.clear(),Xe(m??"",c,`重置${m}表成功! 5秒后自动刷新`),j()}}),e.jsx(Gt,{anchor:"left",open:!O&&F,onClose:T.bind(null,!1),children:e.jsx(Se,{})})]})}const xn="_MainFrame_jou1o_1",gn={MainFrame:xn};function yn(){const[t,{toggle:n}]=is(!0),c=React.useContext(Te);return e.jsxs(React.StrictMode,{children:[e.jsx(fn,{setMenuToggle:n}),e.jsxs("div",{className:gn.MainFrame,style:{"--gap":t?"9q":0},children:[e.jsx(et,{in:t&&c,orientation:"horizontal",children:e.jsx(I,{elevation:24,children:e.jsx(Se,{})})}),e.jsx("div",{children:e.jsx(ts,{})})]})]})}const ft=React.lazy(()=>us(()=>Promise.resolve().then(()=>zs),void 0,import.meta.url)),jn=[{path:"",id:"目录",element:e.jsx(React.Suspense,{fallback:e.jsx(ve,{}),children:e.jsx(ft,{})})}],xt=(...t)=>`/${t.join("/")}`;function vn(){return e.jsx(ss,{children:e.jsxs(xe,{element:e.jsx(yn,{}),children:[e.jsx(xe,{index:!0,element:e.jsx(React.Suspense,{fallback:e.jsx(Ye,{open:!0,children:e.jsx(ve,{})}),children:e.jsx(ft,{})})}),e.jsx(xe,{path:":subtitle/:id",element:e.jsx(dn,{})})]})})}const Sn=Redux.combineReducers({SnackBar:sn,AppBarTitle:js,DB:$s}),gt=Redux.legacy_createStore(Sn,Redux.applyMiddleware(ReduxThunk));gt.subscribe(()=>{});const Tn="_Snackbar_1t4e7_1",Rn={Snackbar:Tn};function bn(){const{open:t,alertText:n,severity:c}=ut(a=>({open:a.SnackBar.open,alertText:a.SnackBar.alertText,severity:a.SnackBar.severity})),d=ReactRedux.useDispatch(),o=(a,l)=>{l!=="clickaway"&&d({type:w.OPENFALSE})};return e.jsx(React.StrictMode,{children:e.jsx(Xt,{open:!!(t&&n),autoHideDuration:6e3,onClose:o,message:n,className:Rn.Snackbar??"",children:e.jsx(st,{onClose:o,severity:c,variant:"filled",children:n})})})}const yt={loadingDelay:300,throttleWait:300},Te=React.createContext(!1),En=()=>{const t=Yt("(orientation:landscape)");return e.jsx(React.StrictMode,{children:e.jsx(Ze,{injectFirst:!0,children:e.jsxs(Zt,{children:[e.jsx(es,{}),e.jsx(ReactRedux.Provider,{store:gt,children:e.jsxs(Te.Provider,{value:t,children:[e.jsx(os,{children:e.jsx(vn,{})}),e.jsx(bn,{})]})})]})})})};ReactDOM.render(e.jsx(React.StrictMode,{children:e.jsx(En,{})}),document.body);
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
